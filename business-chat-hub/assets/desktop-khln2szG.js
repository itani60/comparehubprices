import{$ as Jn,r as m,h as Qn,i as ea,f as ta,a as Vt,R as e,l as na,g as aa,b as sa,m as ra,s as la,c as jt,j as Ft,t as oa,d as ca,e as ia,p as Zt,k as ma,u as da,v as Wt,n as ua,o as fa,q as Jt,w as pa}from"./64-BOnpMDv8.js";typeof window<"u"&&!window.__comparehubEmojiMartInit&&(Jn({data:Jt}),window.__comparehubEmojiMartInit=!0);const le={name:"",firstName:"",lastName:"",status:"",about:"",email:"",phone:"",image:"",streetAddress:"",businessType:"",suburb:"",village:"",town:"",province:"",accountSince:"",accountType:"Business",isVerified:!1,verificationStatus:""},ha=[],ga={},zt=[{value:"spam",label:"Spam"},{value:"harassment",label:"Harassment"},{value:"scam",label:"Scam"},{value:"other",label:"Other"}];function Ea(){if(typeof document>"u")return null;const t=Ht("business_session_id"),a=Ht("business_csrf_token");return!t||!a?null:{sessionId:t,sessionCsrf:a}}function va(t,a){var u;if(typeof document>"u"||!t||!a)return;const r=typeof window<"u"&&((u=window.location)==null?void 0:u.protocol)==="https:"?"; Secure":"",o=12*60*60;document.cookie=`business_session_id=${encodeURIComponent(t)}; path=/; max-age=${o}; SameSite=Strict${r}`,document.cookie=`business_csrf_token=${encodeURIComponent(a)}; path=/; max-age=${o}; SameSite=Strict${r}`}function Yt(){typeof document>"u"||(Gt("business_session_id"),Gt("business_csrf_token"))}function Ht(t){if(!t||typeof document>"u")return"";try{const a=String(document.cookie||"");if(!a)return"";const r=a.split(";");let o="";for(const u of r){const g=u.indexOf("=");if(g<=0||u.slice(0,g).trim()!==t)continue;const x=u.slice(g+1).trim();if(x)try{o=decodeURIComponent(x).trim()}catch{o=x.trim()}}return o}catch{return""}}function Gt(t){var r;const a=typeof window<"u"&&((r=window.location)==null?void 0:r.protocol)==="https:"?"; Secure":"";document.cookie=`${t}=; path=/; max-age=0; SameSite=Strict${a}`}function st(t){try{return new URL(`../${t}`,window.location.href).toString()}catch{return`../${t}`}}const ba=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i,ya=200;function qt(t){return typeof t=="string"&&ba.test(t)}function ka(t){if(typeof t!="string")return"";const a=t.trim().slice(0,ya);return Zt.sanitize(a,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]})}function Na(){if(typeof window>"u")return{conversationId:"",recipientId:"",recipientName:""};try{const t=new URLSearchParams(window.location.search||""),a=(t.get("conversationId")||"").trim(),r=(t.get("recipientId")||"").trim(),o=(t.get("recipientName")||"").trim();return{conversationId:a&&qt(a)?a:"",recipientId:r&&qt(r)?r:"",recipientName:ka(o)}}catch{return{conversationId:"",recipientId:"",recipientName:""}}}function wa(t){return t!=null&&t.id?{id:"",name:String(t.name||"").trim()||"Business",firstName:"",lastName:"",suburb:"",village:"",town:"",province:"",streetAddress:"",accountSince:"",accountType:"Business",isVerified:!1,verificationStatus:"",lastMessage:"No messages yet",lastTime:"",unread:0,online:!1,presence:"Start conversation",color:"#3b82f6",archived:!1,blocked:!1,blockedByMe:!1,blockedByOther:!1,hasBlockingRelationship:!1,otherPartyId:t.id,launchPending:!0}:null}function Ce(t){if(!t)return"";const a=t.split(" ").filter(Boolean),r=a[0]?a[0][0]:"",o=a.length>1?a[a.length-1][0]:"";return(r+o).toUpperCase()}function ge(t){return!t||typeof t!="object"||t.blockedByOther?"User unavailable":t.name||"Unknown"}function ot(t){const a=String((t==null?void 0:t.suburb)||"").trim(),r=String((t==null?void 0:t.village)||"").trim();return a?{label:"Suburb",value:a}:r?{label:"Village",value:r}:{label:"Suburb/Village",value:"-"}}function G(t){return!!(t&&(t.blocked||t.blockedByOther))}function oe(t){return String((t==null?void 0:t.accountType)||(t==null?void 0:t.type)||"").toLowerCase()==="business"}function Qt({name:t,image:a,color:r,blocked:o,size:u=""}){const g=!!a,h=["avatar",u,g?"has-image":""].filter(Boolean).join(" "),x=g?"#ffffff":r;return e.createElement("div",{className:h,style:{backgroundColor:x}},g?e.createElement("img",{src:a,alt:t?`${t} logo`:"Avatar",loading:"lazy"}):Ce(t))}function Ca(){return e.createElement("svg",{id:"Instagram Verification Badge",width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink","aria-hidden":"true",focusable:"false"},e.createElement("rect",{width:"24",height:"24",stroke:"none",fill:"#000000",opacity:"0"}),e.createElement("g",{transform:"matrix(0.42 0 0 0.42 12 12)"},e.createElement("g",null,e.createElement("g",{transform:"matrix(1 0 0 1 0 0)"},e.createElement("polygon",{style:{stroke:"none",strokeWidth:1,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(66,165,245)",fillRule:"nonzero",opacity:1},points:"5.62,-21 9.05,-15.69 15.37,-15.38 15.69,-9.06 21,-5.63 18.12,0 21,5.62 15.69,9.05 15.38,15.37 9.06,15.69 5.63,21 0,18.12 -5.62,21 -9.05,15.69 -15.37,15.38 -15.69,9.06 -21,5.63 -18.12,0 -21,-5.62 -15.69,-9.05 -15.38,-15.37 -9.06,-15.69 -5.63,-21 0,-18.12 "})),e.createElement("g",{transform:"matrix(1 0 0 1 -0.01 0.51)"},e.createElement("polygon",{style:{stroke:"none",strokeWidth:1,strokeDasharray:"none",strokeLinecap:"butt",strokeDashoffset:0,strokeLinejoin:"miter",strokeMiterlimit:4,fill:"rgb(255,255,255)",fillRule:"nonzero",opacity:1},points:"-2.6,6.74 -9.09,0.25 -6.97,-1.87 -2.56,2.53 7,-6.74 9.09,-4.59 "})))))}function ce(t,a,r="normal"){return a?e.createElement("span",{className:`name-with-badge ${r}`},e.createElement("span",null,t),e.createElement("span",{className:"verified-badge-inline",title:"Verified business","aria-label":"Verified business"},e.createElement(Ca,null))):e.createElement("span",null,t)}function en(t){if(!t)return"";const a=new Date(t);return Number.isNaN(a.getTime())?"":a.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}function Sa(t){if(!t)return"";const a=new Date(t);return Number.isNaN(a.getTime())?"":a.toLocaleDateString([],{month:"short",day:"numeric"})}function rt(t){if(!t)return"";const a=new Date(t);return Number.isNaN(a.getTime())?"":a.toLocaleString([],{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}function tn(t){const a=String(t||"").trim();return a?a.split(/[_\s-]+/).filter(Boolean).map(r=>r.charAt(0).toUpperCase()+r.slice(1).toLowerCase()).join(" "):"Status unavailable"}function nn(t){const a=String(t||"").trim().toLowerCase();return a==="resolved"||a==="closed"||a==="complete"||a==="completed"||a==="done"?"success":a==="rejected"||a==="dismissed"||a==="denied"?"danger":a==="open"||a==="pending"||a==="in_review"||a==="in review"||a==="under_review"||a==="under review"?"warning":""}function Kt(t,a){return t.getFullYear()===a.getFullYear()&&t.getMonth()===a.getMonth()&&t.getDate()===a.getDate()}function Ia(t){const a=new Date(t);if(Number.isNaN(a.getTime()))return"";const r=new Date,o=new Date;return o.setDate(r.getDate()-1),Kt(a,r)?"Today":Kt(a,o)?"Yesterday":a.toLocaleDateString([],{month:"short",day:"numeric"})}function Ta(t){const a=[];let r="";return t.forEach(o=>{const u=o.timestamp.slice(0,10);u!==r&&(a.push({type:"day",id:`day-${u}`,label:Ia(o.timestamp)}),r=u),a.push({type:"message",id:o.id,message:o})}),a}function Aa(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const Xt=typeof Intl<"u"&&Intl.Segmenter?new Intl.Segmenter(void 0,{granularity:"grapheme"}):null;function Ba(t){return t?Xt?Array.from(Xt.segment(t),({segment:a})=>a):Array.from(t):[]}function xa(t){return t?new RegExp("^\\p{Regional_Indicator}{2}$","u").test(t)||/[0-9#*]\uFE0F?\u20E3/u.test(t)?!0:new RegExp("\\p{Extended_Pictographic}","u").test(t):!1}function Ra(t){return typeof t!="string"?"":Zt.sanitize(t,{ALLOWED_TAGS:[],ALLOWED_ATTR:[]})}function we(t,a){const r=Ra(t);return Ba(r).map((o,u)=>xa(o)?e.createElement("em-emoji",{key:`${a}-emoji-${u}`,native:o,set:"apple",size:"1.05em"}):e.createElement(e.Fragment,{key:`${a}-text-${u}`},o))}function La(t,a){if(!a)return we(t,"msg");const r=Aa(a);return t.split(new RegExp(`(${r})`,"ig")).map((u,g)=>u.toLowerCase()===a.toLowerCase()?e.createElement("mark",{key:g,className:"msg-highlight"},we(u,`mark-${g}`)):e.createElement(e.Fragment,{key:g},we(u,`part-${g}`)))}function Pa(t,a,r){const o=(r==null?void 0:r.selectionStart)??t.length,u=(r==null?void 0:r.selectionEnd)??o;return{nextValue:t.slice(0,o)+a+t.slice(u),caret:o+a.length}}function ct(t,a,r){m.useEffect(()=>{if(!r)return;const o=u=>{!t.current||t.current.contains(u.target)||a()};return document.addEventListener("mousedown",o),document.addEventListener("touchstart",o),()=>{document.removeEventListener("mousedown",o),document.removeEventListener("touchstart",o)}},[t,a,r])}function $({children:t,size:a=20,className:r}){return e.createElement("svg",{className:r,width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true"},t)}const Da=t=>e.createElement($,{...t},e.createElement("circle",{cx:"12",cy:"5",r:"1.6",fill:"currentColor",stroke:"none"}),e.createElement("circle",{cx:"12",cy:"12",r:"1.6",fill:"currentColor",stroke:"none"}),e.createElement("circle",{cx:"12",cy:"19",r:"1.6",fill:"currentColor",stroke:"none"})),an=t=>e.createElement($,{...t},e.createElement("circle",{cx:"11",cy:"11",r:"6.5"}),e.createElement("line",{x1:"16.5",y1:"16.5",x2:"21",y2:"21"})),Ma=t=>e.createElement($,{...t},e.createElement("rect",{x:"5",y:"11",width:"14",height:"9",rx:"2"}),e.createElement("path",{d:"M8 11V8a4 4 0 0 1 8 0v3"})),$a=t=>e.createElement($,{...t},e.createElement("path",{d:"M6 18l-2.5 3.5V6.5A2.5 2.5 0 0 1 6 4h12a2.5 2.5 0 0 1 2.5 2.5V14A2.5 2.5 0 0 1 18 16.5H7.8L6 18Z"})),Oa=t=>e.createElement($,{...t},e.createElement("path",{d:"M3 12l17-7-7 17-2-6-8-4Z"})),_a=t=>e.createElement($,{...t},e.createElement("circle",{cx:"12",cy:"12",r:"9"}),e.createElement("circle",{cx:"9",cy:"10",r:"1",fill:"currentColor",stroke:"none"}),e.createElement("circle",{cx:"15",cy:"10",r:"1",fill:"currentColor",stroke:"none"}),e.createElement("path",{d:"M8 15c1.2 1.3 2.6 2 4 2s2.8-.7 4-2"})),Ua=t=>e.createElement($,{...t},e.createElement("path",{d:"M7.5 12.5l6.8-6.8a3 3 0 0 1 4.3 4.3l-7.5 7.5a4.5 4.5 0 0 1-6.4-6.4l7.2-7.2"})),Va=t=>e.createElement($,{...t},e.createElement("polyline",{points:"5 12 9 16 19 6"})),ja=t=>e.createElement($,{...t},e.createElement("polyline",{points:"2 12 6 16 12 10"}),e.createElement("polyline",{points:"8 12 12 16 22 6"})),Fa=t=>e.createElement($,{...t},e.createElement("path",{d:"M4 11.5 12 4l8 7.5"}),e.createElement("path",{d:"M6 10.5V20h12v-9.5"})),Wa=t=>e.createElement($,{...t},e.createElement("rect",{x:"4",y:"4",width:"16",height:"5"}),e.createElement("rect",{x:"5",y:"9",width:"14",height:"11"}),e.createElement("line",{x1:"9",y1:"13",x2:"15",y2:"13"})),sn=t=>e.createElement($,{...t},e.createElement("path",{d:"M5 4v16"}),e.createElement("path",{d:"M5 4h12l-2.2 4L17 12H5"})),Ee=t=>e.createElement($,{...t},e.createElement("circle",{cx:"12",cy:"12",r:"9"}),e.createElement("line",{x1:"7",y1:"17",x2:"17",y2:"7"})),za=t=>e.createElement($,{...t},e.createElement("circle",{cx:"12",cy:"8",r:"3.2"}),e.createElement("path",{d:"M4.5 19.5c1.9-3 4.5-4.5 7.5-4.5s5.6 1.5 7.5 4.5"})),rn=t=>e.createElement($,{...t},e.createElement("path",{d:"M4 7h16"}),e.createElement("path",{d:"M9 7V5h6v2"}),e.createElement("path",{d:"M7 7l1 12h8l1-12"}),e.createElement("path",{d:"M10 11v6"}),e.createElement("path",{d:"M14 11v6"})),Ya=t=>e.createElement($,{...t},e.createElement("path",{d:"M9 4h-4v16h4"}),e.createElement("path",{d:"M16 12H7"}),e.createElement("path",{d:"M13 9l3 3-3 3"})),Me=t=>e.createElement($,{...t},e.createElement("line",{x1:"5",y1:"5",x2:"19",y2:"19"}),e.createElement("line",{x1:"19",y1:"5",x2:"5",y2:"19"}));function ln({ariaLabel:t,items:a}){const[r,o]=m.useState(!1),u=m.useRef(null);return ct(u,()=>o(!1),r),e.createElement("div",{className:"menu-wrap",ref:u},e.createElement("button",{className:"icon-btn","aria-label":t,"aria-haspopup":"menu","aria-expanded":r,onClick:()=>o(g=>!g),type:"button"},e.createElement(Da,null)),r?e.createElement("div",{className:"dropdown",role:"menu"},a.map(g=>e.createElement("button",{key:g.label,className:"dropdown-item",role:"menuitem",type:"button",onClick:()=>{o(!1),g.onSelect()}},g.label))):null)}function Ha({status:t}){if(!t)return null;if(t==="sent")return e.createElement(Va,{className:"status-icon"});const a=t==="read"?"status-icon read":"status-icon";return e.createElement(ja,{className:a})}function Ga({open:t,title:a,message:r,confirmLabel:o,onConfirm:u,onCancel:g}){return t?e.createElement("div",{className:"panel-backdrop",role:"dialog","aria-modal":"true","aria-label":a},e.createElement("div",{className:"confirm-dialog"},e.createElement("h3",null,a),e.createElement("p",null,r),e.createElement("div",{className:"confirm-actions"},e.createElement("button",{className:"ghost-btn",type:"button",onClick:g},"Cancel"),e.createElement("button",{className:"primary-btn",type:"button",onClick:u},o)))):null}function qa({open:t,title:a,message:r,confirmLabel:o="Delete",onConfirm:u,onCancel:g}){return t?e.createElement("div",{className:"panel-backdrop",role:"dialog","aria-modal":"true","aria-label":a},e.createElement("div",{className:"confirm-dialog"},e.createElement("h3",null,a),e.createElement("p",null,r),e.createElement("div",{className:"confirm-actions"},e.createElement("button",{className:"ghost-btn",type:"button",onClick:g},"Cancel"),e.createElement("button",{className:"primary-btn",type:"button",onClick:u},o)))):null}function Ka({open:t,onClose:a,currentUser:r}){if(!t)return null;const o={...le,...r&&typeof r=="object"?r:{}},u=o.name||"User",g=ot(o),h=String(o.town||o.city||"").trim()||"-";return e.createElement("div",{className:"panel-backdrop",role:"dialog","aria-modal":"true","aria-label":"Profile panel"},e.createElement("div",{className:"profile-panel"},e.createElement("div",{className:"panel-header"},e.createElement("h2",null,"Profile"),e.createElement("button",{className:"icon-btn","aria-label":"Close profile",onClick:a,type:"button"},e.createElement(Me,null))),e.createElement("div",{className:"profile-hero"},Qt({name:u,image:o.image,color:"#2f9e8f",size:"large",blocked:!1}),e.createElement("div",null,e.createElement("h3",null,ce(u,oe(o)&&o.isVerified,"large")))),e.createElement("div",{className:"profile-section"},e.createElement("h4",null,"Details"),e.createElement("p",null,g.label,": ",g.value),e.createElement("p",null,"Town: ",h),e.createElement("p",null,"Address: ",o.streetAddress||"-"),e.createElement("p",null,"Business type: ",o.businessType||"-"),e.createElement("p",null,"Province: ",o.province||"-"),e.createElement("p",null,"Account since: ",o.accountSince||"-"))))}function Xa({open:t,onClose:a,chat:r,onDelete:o,onBlock:u,onReport:g}){if(!t||!r)return null;const h=!!r.blockedByOther,x=ge(r),O=r.name?r.name.split(" ").filter(Boolean):[],p=O[0]||"",T=O.slice(1).join(" ");h||r.firstName,h||r.lastName;const S=h?"":r.suburb||"",B=h?"":r.village||"",M=ot({suburb:S,village:B}),V=h?"-":r.town||r.city||"-",f=h?"-":r.province||"-",L=h?"-":r.accountSince||"-",k=h?"-":r.accountType||"Standard";return e.createElement("div",{className:"panel-backdrop",role:"dialog","aria-modal":"true","aria-label":"Chat profile"},e.createElement("div",{className:"profile-panel"},e.createElement("div",{className:"panel-header"},e.createElement("h2",null,"Chat Profile"),e.createElement("button",{className:"icon-btn","aria-label":"Close profile",onClick:a,type:"button"},e.createElement(Me,null))),e.createElement("div",{className:"profile-hero"},e.createElement("div",{className:"avatar large",style:{backgroundColor:r.color}},G(r)?e.createElement(Ee,{className:"avatar-blocked-icon",size:18}):Ce(x)),e.createElement("div",null,e.createElement("h3",null,ce(x,oe(r)&&r.isVerified&&!G(r),"large")))),e.createElement("div",{className:"profile-section"},e.createElement("h4",null,"Details"),e.createElement("p",null,M.label,": ",M.value),e.createElement("p",null,"Town: ",V),e.createElement("p",null,"Province: ",f),e.createElement("p",null,"Account since: ",L),e.createElement("p",null,"Account type: ",k)),e.createElement("div",{className:"profile-section"},e.createElement("h4",null,"Actions"),e.createElement("div",{className:"profile-action-row"},e.createElement("button",{className:"profile-btn danger",type:"button",onClick:o},e.createElement(rn,null),"Delete"),h?null:e.createElement(e.Fragment,null,e.createElement("button",{className:"profile-btn warn",type:"button",onClick:u},e.createElement(Ee,null),r.blocked?"Unblock":"Block"),e.createElement("button",{className:"profile-btn",type:"button",onClick:g},e.createElement(sn,null),"Report"))))))}function lt({title:t,subtitle:a}){return e.createElement("div",{className:"empty-state"},e.createElement("h3",null,t),e.createElement("p",null,a))}function Za(){const t=Array.from({length:7}),a=Array.from({length:5});return e.createElement("div",{className:"chat-loading-overlay desktop",role:"status","aria-live":"polite"},e.createElement("div",{className:"chat-loading-desktop-shell"},e.createElement("aside",{className:"chat-loading-desktop-sidebar"},e.createElement("div",{className:"chat-loading-desktop-header"},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-logo"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-circle"})),e.createElement("div",{className:"chat-loading-desktop-search"},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-search-box"})),e.createElement("div",{className:"chat-loading-desktop-list"},t.map((r,o)=>e.createElement("div",{className:"chat-loading-desktop-thread",key:o},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-avatar"}),e.createElement("div",{className:"chat-loading-desktop-thread-meta"},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-line lg"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-line sm"})),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-time"}))))),e.createElement("section",{className:"chat-loading-desktop-chat"},e.createElement("div",{className:"chat-loading-desktop-chat-header"},e.createElement("div",{className:"chat-loading-desktop-chat-user"},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-avatar"}),e.createElement("div",{className:"chat-loading-desktop-thread-meta"},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-line lg"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-line sm"}))),e.createElement("div",{className:"chat-loading-desktop-chat-actions"},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-circle"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-circle"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-circle"}))),e.createElement("div",{className:"chat-loading-desktop-messages"},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-day"}),a.map((r,o)=>e.createElement("div",{className:`chat-loading-desktop-bubble-row ${o%2?"me":"them"}`,key:o},e.createElement("div",{className:"chat-loading-desktop-bubble"},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-line lg"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-line sm"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-meta"}))))),e.createElement("div",{className:"chat-loading-desktop-composer"},e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-circle"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-circle"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-input"}),e.createElement("div",{className:"chat-loading-sk chat-loading-desktop-circle"})))))}function it({title:t,subtitle:a,children:r}){return e.createElement("div",{className:"section-panel"},e.createElement("div",{className:"section-header"},e.createElement("div",null,e.createElement("h2",null,t),a?e.createElement("p",{className:"muted"},a):null)),e.createElement("div",{className:"section-card"},r))}function Ja({currentUser:t}){const a={...le,...t&&typeof t=="object"?t:{}},r=a.name||"User",o=ot(a),u=String(a.town||a.city||"").trim()||"-";return e.createElement(it,{title:"My Profile",subtitle:""},e.createElement("div",{className:"profile-card"},e.createElement("div",{className:"profile-card-hero"},Qt({name:r,image:a.image,color:"#0f766e",size:"large",blocked:!1}),e.createElement("div",null,e.createElement("h3",null,ce(r,oe(a)&&a.isVerified,"large")))),e.createElement("div",{className:"profile-section"},e.createElement("h4",null,"Details"),e.createElement("p",null,o.label,": ",o.value),e.createElement("p",null,"Town: ",u),e.createElement("p",null,"Address: ",a.streetAddress||"-"),e.createElement("p",null,"Business type: ",a.businessType||"-"),e.createElement("p",null,"Province: ",a.province||"-"),e.createElement("p",null,"Account since: ",a.accountSince||"-")),e.createElement("div",{className:"profile-actions"},e.createElement("button",{className:"manage-profile-btn",type:"button","data-link":"manage-profile",onClick:()=>{window.location.href=st("business_account_information.html")}},"Manage Profile"))))}function Qa({chats:t,onUnblock:a}){return e.createElement(it,{title:"Blocked Accounts",subtitle:"People and businesses you blocked."},t.length===0?e.createElement("div",{className:"section-empty"},"No blocked accounts."):e.createElement("div",{className:"section-list"},t.map(r=>e.createElement("div",{key:r.id,className:"section-item"},e.createElement("div",{className:"section-item-info"},e.createElement("div",{className:"avatar",style:{backgroundColor:r.color}},e.createElement(Ee,{className:"avatar-blocked-icon",size:16})),e.createElement("div",{className:"section-item-text"},e.createElement("div",{className:"section-item-name"},ce(r.name,oe(r)&&r.isVerified)))),e.createElement("div",{className:"section-item-meta"},e.createElement("span",{className:"section-tag danger"},"Blocked"),e.createElement("span",null,Sa(r.blockedAt||r.lastTime)),e.createElement("button",{className:"section-action",type:"button",onClick:()=>a(r.id)},"Unblock"))))))}function es({reports:t,onOpenReport:a}){return e.createElement(it,{title:"Reports",subtitle:"Reports you submitted."},t.length===0?e.createElement("div",{className:"section-empty"},"No reports found."):e.createElement("div",{className:"section-list"},t.map(r=>e.createElement("div",{key:r.id,className:"section-item"},e.createElement("div",{className:"section-item-info"},e.createElement("div",{className:"avatar",style:{backgroundColor:r.color||"#3b5bdb"}},Ce(r.name)),e.createElement("div",{className:"section-item-text"},e.createElement("div",{className:"section-item-name"},ce(r.name,oe(r)&&r.isVerified)),e.createElement("div",{className:"section-item-sub"},r.context||"No reason provided."))),e.createElement("div",{className:"section-item-meta"},e.createElement("span",{className:`section-tag ${nn(r.status)}`},tn(r.status)),e.createElement("span",null,rt(r.createdAt)||"Date unavailable"),e.createElement("button",{className:"section-action",type:"button",onClick:()=>a(r)},"View report"))))))}function ts({open:t,report:a,onClose:r}){return!t||!a?null:e.createElement("div",{className:"panel-backdrop",role:"dialog","aria-modal":"true","aria-label":"Report details"},e.createElement("div",{className:"report-details-dialog"},e.createElement("div",{className:"report-details-header"},e.createElement("div",null,e.createElement("div",{className:"report-details-title"},"Report details"),e.createElement("div",{className:"report-sub"},"Submitted information from your report.")),e.createElement("button",{type:"button",className:"report-details-close",onClick:r,"aria-label":"Close report details"},e.createElement(Me,{size:18}))),e.createElement("div",{className:"report-details-grid"},e.createElement("div",{className:"report-details-field"},e.createElement("div",{className:"report-details-label"},"Reported account"),e.createElement("div",{className:"report-details-value"},a.name||"Unknown")),e.createElement("div",{className:"report-details-field"},e.createElement("div",{className:"report-details-label"},"Status"),e.createElement("div",{className:`section-tag ${nn(a.status)}`},tn(a.status))),e.createElement("div",{className:"report-details-field"},e.createElement("div",{className:"report-details-label"},"Sent"),e.createElement("div",{className:"report-details-value"},rt(a.createdAt)||"Not available")),e.createElement("div",{className:"report-details-field"},e.createElement("div",{className:"report-details-label"},"Admin reply time"),e.createElement("div",{className:"report-details-value"},rt(a.adminReplyAt)||"Not available"))),e.createElement("div",{className:"report-details-field"},e.createElement("div",{className:"report-details-label"},"Reason"),e.createElement("div",{className:"report-details-value report-details-reason"},a.context||"No reason provided.")),e.createElement("div",{className:"report-details-field"},e.createElement("div",{className:"report-details-label"},"Admin reply"),e.createElement("div",{className:"report-details-value report-details-reason"},a.adminReply||"No admin reply yet."))))}function ns({open:t,onClose:a,reasons:r,value:o,onChange:u,details:g,onDetailsChange:h,onSubmit:x,targetName:O}){const[p,T]=m.useState(!1),S=m.useRef(null),B=r.find(M=>M.value===o);return ct(S,()=>T(!1),p),m.useEffect(()=>{t||T(!1)},[t]),t?e.createElement("div",{className:"panel-backdrop",role:"dialog","aria-modal":"true","aria-label":"Report"},e.createElement("div",{className:"report-dialog"},e.createElement("div",{className:"report-title"},"Quick report"),e.createElement("div",{className:"report-sub"},"Select a reason for reporting ",O||"this chat","."),e.createElement("div",{className:`report-select${p?" active":""}`,ref:S},e.createElement("button",{className:"report-select__trigger",type:"button",onClick:()=>T(M=>!M),"aria-haspopup":"listbox","aria-expanded":p},e.createElement("span",null,B?B.label:"Choose a reason"),e.createElement("span",{className:"report-select__caret"},"â–¾")),e.createElement("div",{className:"report-select__options",role:"listbox"},r.map(M=>e.createElement("button",{key:M.value,type:"button",className:`report-select__option${o===M.value?" selected":""}`,onClick:()=>{u(M.value),T(!1)},role:"option","aria-selected":o===M.value},M.label)))),e.createElement("textarea",{className:"report-textarea",placeholder:"Optional details",value:g,onChange:M=>h(M.target.value)}),e.createElement("div",{className:"report-actions"},e.createElement("button",{className:"ghost-btn",type:"button",onClick:a},"Cancel"),e.createElement("button",{className:"primary-btn",type:"button",onClick:x,disabled:!o},"Report")))):null}function as({chats:t,searchValue:a,onSearchChange:r,activeChatId:o,onOpenChat:u,onMenuAction:g,emptyTitle:h="No chats yet",emptySubtitle:x="Start a new chat to compare prices.",showSearch:O=!0}){return e.createElement("div",{className:"chat-list-screen"},O?e.createElement("div",{className:"search-bar"},e.createElement(an,{className:"search-icon"}),e.createElement("input",{type:"search",value:a,onChange:p=>r(p.target.value),placeholder:"Search chats or messages","aria-label":"Search chats"})):null,e.createElement("div",{className:"chat-list",role:"list"},t.length===0?e.createElement(lt,{title:h,subtitle:x}):t.map(p=>{const T=ge(p),S=[{label:p.archived?"Unarchive chat":"Archive chat",onSelect:()=>g(p.id,p.archived?"unarchive":"archive")},{label:"Delete chat",onSelect:()=>g(p.id,"delete")},{label:"Report",onSelect:()=>g(p.id,"report")}];return e.createElement("div",{key:p.id,className:`chat-item ${o===p.id?"active":""}`,role:"listitem"},e.createElement("button",{className:"chat-open",onClick:()=>u(p.id),type:"button","aria-label":`Open chat with ${T}`},e.createElement("div",{className:"chat-avatar"},e.createElement("div",{className:"avatar",style:{backgroundColor:p.color}},G(p)?e.createElement(Ee,{className:"avatar-blocked-icon",size:16}):Ce(p.name)),p.online?e.createElement("span",{className:"status-dot","aria-hidden":"true"}):null),e.createElement("div",{className:"chat-body"},e.createElement("div",{className:"chat-row"},e.createElement("span",{className:"chat-name"},ce(T,oe(p)&&p.isVerified&&!G(p))),e.createElement("span",{className:"chat-time"},en(p.lastTime))),e.createElement("div",{className:"chat-row chat-preview"},e.createElement("span",{className:"chat-message"},p.lastMessage?we(p.lastMessage,`chat-last-${p.id}`):"No messages yet"),e.createElement("span",{className:"chat-flags"},p.unread>0?e.createElement("span",{className:"chat-unread"},p.unread):null)))),e.createElement(ln,{ariaLabel:"Chat options",items:S}))})))}function ss({message:t,query:a,onPreviewImage:r}){const o=t.sender==="me",u=typeof t.attachmentUrl=="string"?t.attachmentUrl:"",g=typeof t.attachmentType=="string"?t.attachmentType.toLowerCase():"",h=typeof t.attachmentName=="string"&&t.attachmentName?t.attachmentName:"Attachment",x=!!t.attachmentIsImage||g.startsWith("image/"),O=!!t.attachmentIsVideo||g.startsWith("video/"),p=typeof t.text=="string"&&t.text.trim().length>0,T={width:"100%",maxWidth:"260px",borderRadius:"10px",display:"block",marginBottom:p?"8px":"0"};return e.createElement("div",{className:`message-row ${o?"me":"them"}`},e.createElement("div",{className:`message-bubble ${o?"outgoing":"incoming"}`},u?e.createElement("div",{className:"message-attachment"},x?e.createElement("button",{className:"message-image-trigger",type:"button",onClick:()=>{r&&r(t)},"aria-label":`Preview ${h}`},e.createElement("img",{src:u,alt:h,loading:"lazy",style:T})):O?e.createElement("video",{controls:!0,preload:"metadata",style:T},e.createElement("source",{src:u,type:g||void 0})):e.createElement("a",{href:u,target:"_blank",rel:"noreferrer"},"Open attachment")):null,p?e.createElement("div",{className:"message-text"},La(t.text,a)):null,e.createElement("div",{className:"message-meta"},e.createElement("span",null,en(t.timestamp)),o?e.createElement(Ha,{status:t.status}):null)))}function rs({preview:t,onClose:a,onSave:r,onReport:o}){return t?e.createElement("div",{className:"attachment-preview-panel",role:"region","aria-label":"Photo preview"},e.createElement("div",{className:"attachment-preview-head"},e.createElement("div",{className:"attachment-preview-title"},"Photo preview"),e.createElement("button",{className:"icon-btn",type:"button",onClick:a,"aria-label":"Close preview"},e.createElement(Me,null))),e.createElement("div",{className:"attachment-preview-stage"},e.createElement("img",{src:t.url,alt:t.name||"Image preview",loading:"eager"})),e.createElement("div",{className:"attachment-preview-meta"},t.name||"Image"),e.createElement("div",{className:"attachment-preview-actions"},e.createElement("button",{className:"primary-btn",type:"button",onClick:r},"Save"),e.createElement("button",{className:"ghost-btn",type:"button",onClick:o},"Report Photo"))):null}function ls(){return e.createElement("div",{className:"message-row them"},e.createElement("div",{className:"typing-bubble"},e.createElement("span",{className:"typing-label"},"typing"),e.createElement("div",{className:"typing-dots","aria-hidden":"true"},e.createElement("span",null),e.createElement("span",null),e.createElement("span",null))))}function os(){const t=[!1,!0,!1,!0,!1];return e.createElement("div",{className:"conversation-loading",role:"status","aria-live":"polite","aria-label":"Loading messages"},t.map((a,r)=>e.createElement("div",{key:r,className:`conversation-loading-row ${a?"me":"them"}`},e.createElement("div",{className:"conversation-loading-bubble"},e.createElement("div",{className:"chat-loading-sk conversation-loading-line lg"}),e.createElement("div",{className:"chat-loading-sk conversation-loading-line md"}),e.createElement("div",{className:"chat-loading-sk conversation-loading-line sm"})))))}function cs({value:t,onChange:a,onSend:r,onEmoji:o,onAttach:u,inputRef:g,disabled:h=!1,emojiActive:x=!1}){const O=h?"Unblock to send messages":"Type a message",p=T=>{T.key==="Enter"&&!T.shiftKey&&(T.preventDefault(),!h&&t.trim()&&r())};return e.createElement("div",{className:"composer"},e.createElement("button",{className:`icon-btn${x?" emoji-toggle-active":""}`,type:"button",onClick:o,"aria-label":"Emoji",disabled:h},e.createElement(_a,null)),e.createElement("div",{className:"composer-input-wrap"},e.createElement("div",{className:`composer-render ${t?"has-value":""}`,"aria-hidden":"true"},t?we(t,"composer-input"):null),e.createElement("textarea",{ref:g,className:`composer-input-native ${t?"has-value":""}`,rows:1,value:t,onChange:T=>a(T.target.value),onKeyDown:p,placeholder:O,"aria-label":"Message input",disabled:h})),e.createElement("button",{className:"icon-btn",type:"button",onClick:u,"aria-label":"Attach",disabled:h},e.createElement(Ua,null)),e.createElement("button",{className:"send-btn",type:"button",onClick:r,disabled:h||!t.trim(),"aria-label":"Send message"},e.createElement(Oa,null)))}function is({open:t,onSelect:a,onClose:r}){const o=m.useRef(null);return ct(o,r,t),t?e.createElement("div",{className:"emoji-popover","aria-live":"polite"},e.createElement("div",{className:"emoji-picker-d3",ref:o},e.createElement(ua,{data:Jt,onEmojiSelect:a,theme:"light",set:"apple",getSpritesheetURL:()=>fa,noCountryFlags:!1,dynamicWidth:!0,previewPosition:"none",skinTonePosition:"none",navPosition:"bottom",searchPosition:"sticky",emojiButtonRadius:"8px"}))):null}function ms({chat:t,groupedMessages:a,searchValue:r,showSearch:o,onToggleSearch:u,onSearchChange:g,onSend:h,composerValue:x,onComposerChange:O,onEmoji:p,onAttach:T,emojiOpen:S,onEmojiSelect:B,onEmojiClose:M,composerRef:V,typing:f,conversationLoading:L,messageListRef:k,matchCount:X,onMenuAction:F,attachmentPreview:ve,onOpenAttachmentPreview:ne,onCloseAttachmentPreview:ae,onSaveAttachmentPreview:$e,onReportAttachmentPreview:ie}){if(!t)return e.createElement("div",{className:"conversation empty-view"},e.createElement(lt,{title:"Select a chat",subtitle:"Choose a conversation to see messages and compare prices."}));if(ve)return e.createElement("div",{className:"conversation attachment-only-view"},e.createElement(rs,{preview:ve,onClose:ae,onSave:$e,onReport:ie}));const me=ge(t),se=!!t.launchPending,Oe=se?[{label:"Close chat",onSelect:()=>F("close")}]:[{label:"View profile",onSelect:()=>F("profile")},{label:"Close chat",onSelect:()=>F("close")},{label:"Delete chat",onSelect:()=>F("delete")},{label:"Block",onSelect:()=>F("block")},{label:"Report",onSelect:()=>F("report")}];return e.createElement("div",{className:"conversation"},e.createElement("div",{className:"conversation-header"},e.createElement("div",{className:"conversation-title"},e.createElement("div",{className:"avatar",style:{backgroundColor:t.color}},G(t)?e.createElement(Ee,{className:"avatar-blocked-icon",size:16}):Ce(t.name)),e.createElement("div",{className:"conversation-title-text"},e.createElement("div",{className:"conversation-name"},ce(me,oe(t)&&t.isVerified&&!G(t))),e.createElement("div",{className:"conversation-status"},se?e.createElement("span",null,"Start conversation"):f?e.createElement("span",null,"Typing..."):e.createElement(e.Fragment,null,t.online?e.createElement("span",{className:"presence-dot"}):null,e.createElement("span",null,t.online?"online":t.presence))))),e.createElement("div",{className:"conversation-actions"},e.createElement(ln,{ariaLabel:"Conversation menu",items:Oe}))),o?e.createElement("div",{className:"conversation-search"},e.createElement(an,{className:"search-icon"}),e.createElement("input",{type:"search",value:r,onChange:Y=>g(Y.target.value),placeholder:"Search in conversation","aria-label":"Search within conversation"}),r?e.createElement("span",{className:"search-count"},X," match",X===1?"":"es"):null):null,e.createElement("div",{className:"conversation-scroll",ref:k},e.createElement("div",{className:"security-banner"},e.createElement(Ma,null),e.createElement("div",null,"Messages are end-to-end encrypted. No one outside of this chat can read or listen to them.")),L?e.createElement(os,null):a.length===0?e.createElement(lt,{title:r?"No matches":"No messages yet",subtitle:r?"Try a different phrase.":"Send a message to start the chat."}):a.map(Y=>Y.type==="day"?e.createElement("div",{key:Y.id,className:"day-separator"},Y.label):e.createElement(ss,{key:Y.id,message:Y.message,query:r.trim(),onPreviewImage:ne})),f&&!r&&!L?e.createElement(ls,null):null,!L&&G(t)?e.createElement("div",{className:"blocked-notice",role:"note"},t.blockedByOther?"You cannot message this account.":"You blocked this account. Unblock to send messages."):null),e.createElement(cs,{value:x,onChange:O,onSend:h,onEmoji:p,onAttach:T,inputRef:V,disabled:G(t),emojiActive:S}),e.createElement(is,{open:S,onSelect:B,onClose:M}))}function ds({currentUser:t=le,initialChats:a=ha,initialMessages:r=ga}){const o={...le,...t&&typeof t=="object"?t:{}},u=Array.isArray(a)?a:[],g=r&&typeof r=="object"?r:{},h=m.useMemo(()=>Na(),[]),x=!!(h.conversationId||h.recipientId),O=m.useRef(!x),[p,T]=m.useState("chats"),[S,B]=m.useState(u),[M,V]=m.useState(g),[f,L]=m.useState(null),[k,X]=m.useState(h.recipientId?{id:h.recipientId,name:h.recipientName||"Business"}:null),[F,ve]=m.useState(""),[ne,ae]=m.useState(""),[$e,ie]=m.useState(!1),[me,se]=m.useState(""),[Oe,Y]=m.useState(!1),[mt,be]=m.useState(!1),[on,cn]=m.useState(!1),[fs,dt]=m.useState(null),[ut,_e]=m.useState(!1),[mn,ft]=m.useState(!1),[q,pt]=m.useState(null),[ht,Se]=m.useState([]),[Ue,Ve]=m.useState([]),[je,gt]=m.useState(!1),[J,Fe]=m.useState(null),[dn,We]=m.useState(!1),[Ie,Te]=m.useState(""),[Et,Ae]=m.useState(""),[de,ze]=m.useState(null),[W,Ye]=m.useState(null),[He,vt]=m.useState(!1),[un,Be]=m.useState(null),[xe,Ge]=m.useState({sessionId:"",sessionCsrf:"",userId:"",realtimeToken:""}),[bt,yt]=m.useState(o),[ue,kt]=m.useState({open:!1,title:"",message:"",confirmLabel:"Delete",onConfirm:null}),[fe,Nt]=m.useState({open:!1,title:"",message:"",confirmLabel:"Confirm",onConfirm:null}),wt=m.useRef(null),ye=m.useRef(null),qe=m.useRef(null),ke=m.useRef(null),re=m.useRef(null),Q=m.useRef(null),_=m.useRef({lastSentAt:0,lastValue:!1,idleTimer:null}),Ke=m.useRef(!1),Ct=m.useRef(0),St=m.useRef(null),P=xe.sessionId,D=xe.sessionCsrf,U=xe.userId,Xe=xe.realtimeToken,A=!!(P&&D&&U),C=S.find(n=>n.id===f)||null,fn=m.useMemo(()=>wa(k),[k]),j=C||fn,Re=m.useMemo(()=>S.filter(n=>!n.archived),[S]),Ne=m.useMemo(()=>S.filter(n=>n.archived),[S]),pn=m.useMemo(()=>{const n=new Map;return ht.forEach(s=>{s!=null&&s.id&&n.set(s.id,{id:s.id,name:s.name||"Unknown",blockedAt:s.blockedAt||"",color:s.color||"#3b82f6"})}),Array.from(n.values())},[ht]),hn=m.useMemo(()=>{const n=F.trim().toLowerCase();return n?Ne.filter(s=>s.name.toLowerCase().includes(n)||(s.lastMessage||"").toLowerCase().includes(n)):Ne},[Ne,F]),gn=m.useMemo(()=>{const n=F.trim().toLowerCase();return n?Re.filter(s=>s.name.toLowerCase().includes(n)||(s.lastMessage||"").toLowerCase().includes(n)):Re},[Re,F]),Le=f?M[f]||[]:[],Ze=m.useMemo(()=>{const n=ne.trim().toLowerCase();return n?Le.filter(s=>s.text.toLowerCase().includes(n)):Le},[Le,ne]),En=m.useMemo(()=>Ta(Ze),[Ze]),vn=!!(f&&un===f),It=()=>{Q.current&&(window.clearTimeout(Q.current),Q.current=null),_.current.idleTimer&&(window.clearTimeout(_.current.idleTimer),_.current.idleTimer=null)},Pe=async n=>{const s=re.current;if(!s||!U)return;const l=!!n,i=Date.now(),c=_.current;if(!(c.lastValue===l&&i-c.lastSentAt<600)){c.lastValue=l,c.lastSentAt=i;try{await s.send({type:"broadcast",event:"typing",payload:{isTyping:l,userId:String(U)}})}catch{}}};m.useEffect(()=>{let n=!1;return(async()=>{if(!f||!U||!Xe||!A){be(!1);return}try{const l=await aa();if(!l||n)return;l.realtime.setAuth(Xe);const i=re.current;if(i)try{await i.unsubscribe()}catch{}re.current=null,It(),_.current.lastValue=!1;const c=l.channel(`conversation:${f}`,{config:{presence:{key:`chat:${String(U)}`}}}),E=()=>{try{const N=typeof c.presenceState=="function"?c.presenceState():{};let y=!1;for(const w of Object.values(N||{})){const v=Array.isArray(w)?w:[w];for(const b of v){const I=String((b==null?void 0:b.userId)||(b==null?void 0:b.user_id)||"");if(I&&I!==String(U)){y=!0;break}}if(y)break}B(w=>w.map(v=>v.id!==f||v.hasBlockingRelationship||v.blockedByOther?v:y?{...v,online:!0,presence:"online"}:{...v,online:!1}))}catch{}};c.on("presence",{event:"sync"},E),c.on("presence",{event:"join"},E),c.on("presence",{event:"leave"},E),c.on("broadcast",{event:"typing"},({payload:N})=>{const y=String((N==null?void 0:N.userId)||"");if(!y||y===String(U))return;const w=!!(N!=null&&N.isTyping);be(w),Q.current&&(window.clearTimeout(Q.current),Q.current=null),w&&(Q.current=window.setTimeout(()=>{be(!1),Q.current=null},3e3))}),re.current=c,c.subscribe(async(N,y)=>{if(!n&&N==="SUBSCRIBED")try{await c.track({userId:String(U),at:new Date().toISOString()}),E()}catch{}})}catch{n||be(!1)}})(),()=>{n=!0;const l=re.current;if(re.current=null,l)try{l.unsubscribe()}catch{}It(),_.current.lastValue=!1,be(!1)}},[f,A,U,Xe]),m.useEffect(()=>{if(!f||!U||!re.current)return;const n=me.trim().length>0,s=Date.now(),l=_.current;n!==l.lastValue&&s-l.lastSentAt>600&&Pe(n),l.idleTimer&&(window.clearTimeout(l.idleTimer),l.idleTimer=null),n&&(l.idleTimer=window.setTimeout(()=>{_.current.idleTimer=null,Pe(!1)},2e3))},[me,f,U]),m.useEffect(()=>{if(!f||ne.trim())return;const n=wt.current;n&&requestAnimationFrame(()=>{n.scrollTo({top:n.scrollHeight,behavior:"smooth"})})},[f,Le.length,mt,ne]),m.useEffect(()=>{f||Y(!1)},[f]),m.useEffect(()=>{Ye(null)},[f]),m.useEffect(()=>{(!f||!A)&&Be(null)},[f,A]),m.useEffect(()=>()=>{ke.current&&clearTimeout(ke.current)},[]);const d=n=>{dt(n),ke.current&&clearTimeout(ke.current),ke.current=setTimeout(()=>dt(null),2400)},Tt=(n,s={})=>{if(Number(n==null?void 0:n.status)!==401)return!1;const l=!!(s!=null&&s.silent);return Yt(),Ge({sessionId:"",sessionCsrf:"",userId:"",realtimeToken:""}),L(null),X(null),l||d("Session missing or expired. Please log in again."),!0},bn=n=>{if(!n||typeof n!="object")return;const s=typeof n.attachmentUrl=="string"?n.attachmentUrl.trim():"",l=typeof n.attachmentType=="string"?n.attachmentType.toLowerCase():"",i=!!n.attachmentIsImage||l.startsWith("image/");if(!s||!i)return;const c=typeof n.attachmentName=="string"&&n.attachmentName?n.attachmentName:"photo";Ye({url:s,name:c,messageId:typeof n.id=="string"?n.id:""})},yn=()=>{Ye(null)},kn=async()=>{if(!(W!=null&&W.url))return;const n=W.name||"photo";try{const s=await fetch(W.url);if(!s.ok)throw new Error("download_failed");const l=await s.blob(),i=window.URL.createObjectURL(l),c=document.createElement("a");c.href=i,c.download=n,document.body.appendChild(c),c.click(),c.remove(),window.URL.revokeObjectURL(i),d("Image saved.")}catch{const s=document.createElement("a");s.href=W.url,s.target="_blank",s.rel="noreferrer",s.click(),d("Could not save directly. Opened image in a new tab.")}},Nn=()=>{if(!C){d("No chat selected.");return}ze(C),Te(""),Ae(W!=null&&W.name?`Photo attachment: ${W.name}`:"Photo attachment"),We(!0)};m.useEffect(()=>{if(!f||!A)return;let n=!1;Be(f);const s=async({silent:i=!1}={})=>{try{const{messages:c,chatPatch:E}=await sa({sessionId:P,sessionCsrf:D,conversationId:f,currentUserId:U});if(n)return;V(N=>{const y=N[f]||[],w=new Set(c.map(b=>b.id)),v=y.filter(b=>b.id&&b.id.startsWith("m-")&&!w.has(b.id));return{...N,[f]:[...c,...v]}}),B(N=>N.map(y=>y.id===f?{...y,...E||{},unread:0}:y));try{await ra({sessionId:P,sessionCsrf:D,conversationId:f})}catch{}}catch(c){if(!n&&Tt(c))return;!n&&!i&&d((c==null?void 0:c.message)||"Failed to load chat messages.")}finally{n||Be(c=>c===f?null:c)}};s();const l=window.setInterval(()=>{s({silent:!0})},5e3);return()=>{n=!0,window.clearInterval(l)}},[f,A,P,D,U]);const wn=n=>{if(!n){d("No chat selected.");return}pt(n),ft(!0)},Je=()=>{ft(!1),pt(null)},Cn=(n,s)=>{const l=S.find(y=>y.id===n),i=(l==null?void 0:l.otherPartyId)||n;if(!i)return;const c=s||new Date().toISOString(),E=(l==null?void 0:l.name)||"Unknown",N=(l==null?void 0:l.color)||"#3b82f6";Se(y=>{const w=y.filter(v=>v.id!==i);return[{id:i,name:E,blockedAt:c,color:N},...w]})},At=({accountId:n,conversationId:s=""})=>{const l=typeof n=="string"?n.trim():"",i=typeof s=="string"?s.trim():"";B(c=>c.map(E=>{const N=!!i&&E.id===i,y=!!l&&E.otherPartyId===l;if(!N&&!y)return E;const w=!!E.blockedByOther;return{...E,blocked:!1,blockedByMe:!1,hasBlockingRelationship:w,blockedAt:void 0}})),l&&Se(c=>c.filter(E=>E.id!==l))},Bt=async n=>{if(!n)return!1;if(A)try{await oa({sessionId:P,sessionCsrf:D,conversationId:n})}catch(l){return d((l==null?void 0:l.message)||"Failed to block account."),!1}const s=new Date().toISOString();return B(l=>l.map(i=>i.id===n?{...i,blocked:!0,blockedByMe:!0,hasBlockingRelationship:!0,blockedAt:s}:i)),Cn(n,s),f===n&&L(null),d("Chat blocked."),!0},Sn=async n=>{if(!n)return!1;const s=S.find(i=>i.id===n),l=(s==null?void 0:s.otherPartyId)||"";if(A)try{await Ft({sessionId:P,sessionCsrf:D,conversationId:n||void 0,recipientId:l||void 0})}catch(i){return d((i==null?void 0:i.message)||"Failed to unblock account."),!1}return At({accountId:l,conversationId:n}),d("Account unblocked."),!0},In=async n=>{const s=typeof n=="string"?n.trim():"";if(!s)return!1;const l=S.find(c=>c.otherPartyId===s),i=(l==null?void 0:l.id)||"";if(A)try{await Ft({sessionId:P,sessionCsrf:D,conversationId:i||void 0,recipientId:s})}catch(c){return d((c==null?void 0:c.message)||"Failed to unblock account."),!1}return At({accountId:s,conversationId:i}),d("Account unblocked."),!0},Tn=async(n,s={})=>{if(!n)return!1;const l=s.clearActive!==!1,i=s.toast!==!1;if(A)try{await ma({sessionId:P,sessionCsrf:D,conversationId:n})}catch(c){return d((c==null?void 0:c.message)||"Failed to archive chat."),!1}return B(c=>c.map(E=>E.id===n?{...E,archived:!0,archivedAt:new Date().toISOString()}:E)),l&&f===n&&L(null),i&&d("Chat archived."),!0},xt=async(n,s={})=>{if(!n)return!1;const l=s.clearActive===!0,i=s.toast!==!1;if(A)try{await da({sessionId:P,sessionCsrf:D,conversationId:n})}catch(c){return d((c==null?void 0:c.message)||"Failed to restore chat."),!1}return B(c=>c.map(E=>E.id===n?{...E,archived:!1,archivedAt:void 0}:E)),l&&f===n&&L(null),i&&d("Chat restored from archive."),!0},An=n=>{n&&(Fe(n),gt(!0))},Rt=()=>{gt(!1),Fe(null)},Qe=n=>{n&&(ze(n),Te(""),Ae(""),We(!0))},Lt=()=>{We(!1),ze(null),Te(""),Ae("")},Bn=async()=>{var i;if(!de||!Ie)return;if(!A){d("Session missing or expired. Please log in again.");return}const n=((i=zt.find(c=>c.value===Ie))==null?void 0:i.label)||Ie,s=Et.trim(),l=s?`${n} - ${s}`:n;try{await ca({sessionId:P,sessionCsrf:D,conversationId:de.id,recipientId:de.otherPartyId,reason:l});try{const c=await Vt({sessionId:P,sessionCsrf:D});Ve(c)}catch{}Lt(),d("Report sent.")}catch(c){d((c==null?void 0:c.message)||"Failed to submit report.")}},xn=({title:n,message:s,confirmLabel:l,onConfirm:i})=>{Nt({open:!0,title:n,message:s,confirmLabel:l,onConfirm:i})},et=()=>{Nt(n=>({...n,open:!1}))},Rn=m.useCallback(async(n,s,l={})=>{const i=!!(l!=null&&l.silent);if(He)return!1;const c=n.trim(),E=s.trim();if(!c||!E)return i||d("Session credentials missing. Please log in again."),!1;vt(!0);try{const N=await Qn({sessionId:c,sessionCsrf:E}),{chats:y,blockedAccounts:w,reports:v,currentUser:b}=await ea({sessionId:c,sessionCsrf:E});Ge({sessionId:c,sessionCsrf:E,userId:N.userId,realtimeToken:N.token||""}),yt(b?{...le,...b}:{...le,...o}),va(c,E),B(y),Se(w),V({}),Ve(v);let I=null,R=null;if(!O.current){if(h.conversationId){const Z=y.find(te=>te.id===h.conversationId);Z&&(I=Z.id)}if(!I&&h.recipientId){const Z=y.find(te=>te.otherPartyId===h.recipientId);Z?I=Z.id:R={id:h.recipientId,name:h.recipientName||"Business"}}O.current=!0}return X(R),L(I),_e(!1),ve(""),ae(""),ie(!1),T("chats"),!i&&y.length===0?d("Connected. No chats found."):i||d(`Connected. Loaded ${y.length} chat${y.length===1?"":"s"}.`),!0}catch(N){const y=Tt(N,{silent:i});return!i&&!y&&d((N==null?void 0:N.message)||"Failed to restore your session."),!1}finally{vt(!1)}},[He,o,h]);St.current=Rn,m.useEffect(()=>{let n=!1;return(async()=>{const l=Ea();if(!l){n||d("Session missing or expired. Please log in again.");return}const i=St.current;if(!i)return;await i(l.sessionId,l.sessionCsrf,{silent:!0})||n||d("Session missing or expired. Please log in again.")})(),()=>{n=!0}},[]);const pe=({title:n,message:s,confirmLabel:l="Delete",onConfirm:i})=>{kt({open:!0,title:n,message:s,confirmLabel:l,onConfirm:i})},ee=()=>{kt(n=>({...n,open:!1}))},Ln=async(n,s={})=>{s.unarchive&&!await xt(n,{clearActive:!1,toast:!0})||(L(n),X(null),A&&Be(n),_e(!1),s.keepSection||T("chats"),B(l=>l.map(i=>i.id===n?{...i,unread:0}:i)),ie(!1),ae(""))},Pt=(n,s,l)=>{V(i=>{const c=i[n]||[];return{...i,[n]:c.map(E=>E.id===s?{...E,status:l}:E)}})},Pn=1e3,Dn=async()=>{const n=Date.now();if(n-Ct.current<Pn){d("Please wait before sending another message.");return}const s=me.trim(),l=f||"",i=l?"":(k==null?void 0:k.id)||"",c=(C==null?void 0:C.name)||(k==null?void 0:k.name)||h.recipientName||"Business",E=(C==null?void 0:C.color)||"#3b82f6";if(!s||!!!(l||i))return;if(Ct.current=n,G(j)){d(j!=null&&j.blockedByOther?"You cannot message this account.":"Unblock this account to send messages.");return}if(!l&&Ke.current){d("Please wait, sending previous message...");return}if(A){l||(Ke.current=!0);try{const w=await la({sessionId:P,sessionCsrf:D,conversationId:l||void 0,recipientId:i||void 0,content:s}),v=jt(w==null?void 0:w.data,U),b=(typeof v.chatId=="string"?v.chatId.trim():"")||l;if(!b)throw new Error("Failed to resolve conversation ID.");V(I=>({...I,[b]:[...I[b]||[],v]})),se(""),B(I=>{const R=v.timestamp||new Date().toISOString();if(!I.find(z=>z.id===b))return[{id:b,name:c,firstName:"",lastName:"",suburb:"",village:"",town:"",province:"",streetAddress:"",accountSince:"",accountType:"Business",lastMessage:v.text||s,lastTime:R,unread:0,online:!1,presence:"",color:E,archived:!1,blocked:!1,blockedByMe:!1,blockedByOther:!1,hasBlockingRelationship:!1,otherPartyId:i||(k==null?void 0:k.id)||""},...I];const te=I.map(z=>z.id===b?{...z,lastMessage:v.text||s,lastTime:v.timestamp||R,unread:0}:z),he=te.find(z=>z.id===b),De=te.filter(z=>z.id!==b);return he?[he,...De]:te}),L(b),X(null),_.current.idleTimer&&(window.clearTimeout(_.current.idleTimer),_.current.idleTimer=null),_.current.lastValue=!1,Pe(!1)}catch(w){d((w==null?void 0:w.message)||"Failed to send message.")}finally{Ke.current=!1}return}if(!l){d("Session missing or expired. Please log in again.");return}const y={id:`m-${Date.now()}`,chatId:l,sender:"me",text:s,timestamp:new Date().toISOString(),status:"sent"};V(w=>({...w,[l]:[...w[l]||[],y]})),se(""),B(w=>{const v=w.map(R=>R.id===l?{...R,lastMessage:s,lastTime:y.timestamp,unread:0}:R),b=v.find(R=>R.id===l),I=v.filter(R=>R.id!==l);return b?[b,...I]:v}),setTimeout(()=>Pt(l,y.id,"delivered"),900),setTimeout(()=>Pt(l,y.id,"read"),2e3),_.current.idleTimer&&(window.clearTimeout(_.current.idleTimer),_.current.idleTimer=null),_.current.lastValue=!1,Pe(!1)},Mn=()=>{if(!f&&!(k!=null&&k.id)){d("Select a chat to add emojis.");return}Y(n=>!n)},$n=()=>{Y(!1)},On=n=>{var l,i;const s=(n==null?void 0:n.native)??((i=(l=n==null?void 0:n.skins)==null?void 0:l[0])==null?void 0:i.native)??"";s&&se(c=>{const{nextValue:E,caret:N}=Pa(c,s,ye.current);return requestAnimationFrame(()=>{ye.current&&(ye.current.focus(),ye.current.setSelectionRange(N,N))}),E})},_n=()=>{if(!f&&!(k!=null&&k.id)){d("Select a chat first.");return}if(!A){d("Session missing or expired. Please log in again.");return}if(G(j)){d(j!=null&&j.blockedByOther?"You cannot message this account.":"Unblock this account to send messages.");return}qe.current&&qe.current.click()},Un=new Set(["image/png","image/jpeg","image/webp"]),Vn=new Set(["video/mp4","video/webm","video/quicktime","video/x-m4v"]),jn=new Set(["application/pdf"]),Dt=10*1024*1024,Fn=15*1024*1024;function Wn(n){const s=(n.type||"").toLowerCase(),l=(n.name||"").toLowerCase();return Un.has(s)||/\.(png|jpe?g|webp)$/.test(l)?{ok:!0,maxBytes:Dt,label:"images"}:Vn.has(s)||/\.(mp4|webm|mov|m4v)$/.test(l)?{ok:!0,maxBytes:Fn,label:"videos"}:jn.has(s)||l.endsWith(".pdf")?{ok:!0,maxBytes:Dt,label:"documents"}:{ok:!1,maxBytes:0,label:""}}const zn=async n=>{var w;const s=n.target,l=(w=s==null?void 0:s.files)==null?void 0:w[0];if(s&&(s.value=""),!l)return;const i=Wn(l);if(!i.ok){d("Unsupported file type. Allowed: PNG, JPEG, WEBP, PDF, MP4, WEBM, MOV.");return}if(l.size>i.maxBytes){const v=Math.round(i.maxBytes/1048576);d(`File too large. Maximum ${v}MB for ${i.label}.`);return}if(!f&&!(k!=null&&k.id)){d("Select a chat first.");return}if(!A){d("Session missing or expired. Please log in again.");return}if(G(j)){d(j!=null&&j.blockedByOther?"You cannot message this account.":"Unblock this account to send messages.");return}const c=f||"",E=c?"":(k==null?void 0:k.id)||"",N=(C==null?void 0:C.name)||(k==null?void 0:k.name)||h.recipientName||"Business",y=(C==null?void 0:C.color)||"#3b82f6";try{const v=await ia({sessionId:P,sessionCsrf:D,conversationId:c||void 0,recipientId:E||void 0,file:l}),b=jt(v==null?void 0:v.data,U),I=(typeof b.chatId=="string"?b.chatId.trim():"")||c;if(!I)throw new Error("Failed to resolve conversation ID.");V(R=>({...R,[I]:[...R[I]||[],b]})),B(R=>{const Z=b.timestamp||new Date().toISOString();if(!R.find(K=>K.id===I))return[{id:I,name:N,firstName:"",lastName:"",suburb:"",village:"",town:"",province:"",streetAddress:"",accountSince:"",accountType:"Business",lastMessage:b.text||l.name,lastTime:Z,unread:0,online:!1,presence:"",color:y,archived:!1,blocked:!1,blockedByMe:!1,blockedByOther:!1,hasBlockingRelationship:!1,otherPartyId:E||(k==null?void 0:k.id)||""},...R];const he=R.map(K=>K.id===I?{...K,lastMessage:b.text||l.name,lastTime:b.timestamp||Z,unread:0}:K),De=he.find(K=>K.id===I),z=he.filter(K=>K.id!==I);return De?[De,...z]:he}),L(I),X(null),d("Attachment sent.")}catch(v){d((v==null?void 0:v.message)||"Failed to send attachment.")}},tt=n=>{if(!Array.isArray(n)||n.length===0)return;const s=new Set(n.filter(Boolean));s.size&&(B(l=>l.filter(i=>!s.has(i.id))),V(l=>{const i={...l};return s.forEach(c=>{delete i[c]}),i}),f&&s.has(f)&&L(null))},nt=async(n,s={})=>{const l=typeof n=="string"?n.trim():"";if(!l)return!1;const i=s.toast!==!1;if(A)try{await Wt({sessionId:P,sessionCsrf:D,conversationId:l})}catch(c){return d((c==null?void 0:c.message)||"Failed to delete chat."),!1}return tt([l]),i&&d("Chat deleted."),!0},Mt=async()=>{const n=S.map(i=>i.id).filter(Boolean);if(n.length===0)return d("No chats to delete."),!1;if(!A)return tt(n),d("All chats deleted."),!0;const s=[];for(const i of n)try{await Wt({sessionId:P,sessionCsrf:D,conversationId:i}),s.push(i)}catch{}s.length>0&&tt(s);const l=n.length-s.length;return s.length===0?(d("Failed to delete chats."),!1):l===0?(d("All chats deleted."),!0):(d(`Deleted ${s.length} chat${s.length===1?"":"s"}. ${l} failed.`),!1)},Yn=n=>{V(s=>({...s,[n]:[]})),B(s=>s.map(l=>l.id===n?{...l,lastMessage:"No messages yet",lastTime:"",unread:0}:l))},Hn=()=>{if(f){Yn(f),d("Cleared current chat.");return}const n={};S.forEach(s=>{n[s.id]=[]}),V(n),B(s=>s.map(l=>({...l,lastMessage:"No messages yet",lastTime:"",unread:0}))),d("Cleared all chats.")},Gn=n=>{if(n==="profile"){C&&wn(C);return}if(n==="close"){L(null),X(null),_e(!0),ie(!1),ae(""),d("Chat closed.");return}if(n==="block"){if(!C)return;Bt(C.id);return}if(n==="delete"){pe(C?{title:`Delete chat with ${ge(C)}?`,message:"This removes the chat from your list.",onConfirm:()=>{ee(),nt(C.id)}}:{title:"Delete all chats?",message:"This removes every chat from your list.",onConfirm:()=>{ee(),Mt()}});return}if(n==="clear"){const s=C?`Clear chat with ${C.name}?`:"Clear all chats?";xn({title:s,message:C?"This clears the messages in this chat.":"This clears the messages in every chat.",confirmLabel:"Clear",onConfirm:()=>{et(),Hn()}});return}n==="report"&&C&&Qe(C)},qn=()=>{ie(n=>{const s=!n;return s||ae(""),s})},Kn=async(n,s)=>{if(s==="archive"){await Tn(n,{clearActive:!0,toast:!0});return}if(s==="unarchive"){await xt(n,{clearActive:H,toast:!0});return}if(s==="delete"){const l=S.find(i=>i.id===n);pe({title:l?`Delete chat with ${ge(l)}?`:"Delete chat?",message:"This removes the chat from your list.",onConfirm:()=>{ee(),nt(n)}});return}if(s==="report"){const l=S.find(i=>i.id===n);Qe(l)}},Xn=n=>{In(n)},H=p==="archive",$t=p==="block",Ot=p==="profile",_t=p==="reports",at=!!W,Ut=at||Ot||$t||_t,Zn=He;return m.useEffect(()=>{if(!H||ut)return;if(Ne.length===0){L(null);return}const n=S.find(s=>s.id===f);n&&!n.archived&&L(null)},[H,Ne,S,f,ut]),m.useEffect(()=>{if(H)return;const n=S.find(s=>s.id===f);n&&n.archived&&L(null)},[H,S,f,Re]),m.useEffect(()=>{if(!A||p!=="block")return;let n=!1;return(async()=>{try{const s=await ta({sessionId:P,sessionCsrf:D});n||Se(s)}catch{}})(),()=>{n=!0}},[A,p,P,D]),m.useEffect(()=>{if(!A||p!=="reports")return;let n=!1;return(async()=>{try{const s=await Vt({sessionId:P,sessionCsrf:D});n||Ve(s)}catch{}})(),()=>{n=!0}},[A,p,P,D]),m.useEffect(()=>{if(!je||!(J!=null&&J.id))return;const n=Ue.find(s=>s.id===J.id);if(!n){Rt();return}Fe(n)},[je,J==null?void 0:J.id,Ue]),e.createElement("div",{className:"desktop-stage"},e.createElement("div",{className:"desktop-window"},e.createElement("div",{className:`desktop-content chp-desktop${at?" preview-only":Ut?" section-only":""}`},at?null:e.createElement("aside",{className:"icon-rail"},e.createElement("nav",{className:"rail-nav","aria-label":"Primary"},[{key:"home",label:"Home",icon:Fa},{key:"chats",label:"Chats",icon:$a},{key:"archive",label:"Archive",icon:Wa},{key:"block",label:"Block",icon:Ee},{key:"reports",label:"Reports",icon:sn},{key:"profile",label:"Profile",icon:za}].map(n=>{const s=n.icon;return e.createElement("button",{key:n.key,className:`rail-btn ${p===n.key?"active":""}`,type:"button",onClick:()=>{if(T(n.key),n.key==="home"){window.location.href=st("home.html");return}},"aria-label":n.label},e.createElement("span",{className:"rail-icon"},e.createElement(s,null)),e.createElement("span",null,n.label))})),e.createElement("div",{className:"rail-footer"},e.createElement("button",{className:`rail-btn danger ${p==="logout"?"active":""}`,type:"button",onClick:()=>{T("logout"),pe({title:"Log out?",message:"Are you sure you want to log out?",confirmLabel:"Log out",onConfirm:()=>{ee(),Yt(),Ge({sessionId:"",sessionCsrf:"",userId:"",realtimeToken:""}),yt({...le,...o}),d("Logged out."),window.location.href=st("home.html")}})},"aria-label":"Logout"},e.createElement("span",{className:"rail-icon"},e.createElement(Ya,null)),e.createElement("span",null,"Logout")))),Ut?null:e.createElement("aside",{className:"sidebar"},H?e.createElement(e.Fragment,null,e.createElement("div",{className:"archive-heading"},e.createElement("h2",null,"Achieved Chats")),e.createElement("div",{className:"archive-description muted"},"Archived conversations stored here.")):e.createElement("div",{className:"sidebar-header"},e.createElement("div",{className:"sidebar-title"},e.createElement("div",{className:"sidebar-brand"},e.createElement("img",{src:na,alt:"CompareHubPrices"}))),e.createElement("div",{className:"sidebar-actions-row"},e.createElement("button",{className:"icon-btn",type:"button","aria-label":"Delete all chats",onClick:()=>{pe({title:"Delete all chats?",message:"This removes every chat from your list.",onConfirm:()=>{ee(),Mt()}})}},e.createElement(rn,null)))),e.createElement(as,{chats:H?hn:gn,searchValue:F,onSearchChange:ve,activeChatId:f,onOpenChat:n=>Ln(n,{keepSection:H}),onMenuAction:Kn,emptyTitle:H?"No archived chats":void 0,emptySubtitle:H?"Archived conversations will appear here.":void 0,showSearch:!H})),e.createElement("section",{className:"chat-panel"},Ot?e.createElement(Ja,{currentUser:bt}):$t?e.createElement(Qa,{chats:pn,onUnblock:Xn}):_t?e.createElement(es,{reports:Ue,onOpenReport:An}):e.createElement(ms,{chat:j,groupedMessages:En,searchValue:ne,showSearch:$e,onToggleSearch:qn,onSearchChange:ae,onSend:Dn,composerValue:me,onComposerChange:se,onEmoji:Mn,onAttach:_n,emojiOpen:Oe,onEmojiSelect:On,onEmojiClose:$n,composerRef:ye,typing:mt,conversationLoading:vn,messageListRef:wt,matchCount:Ze.length,onMenuAction:Gn,attachmentPreview:W,onOpenAttachmentPreview:bn,onCloseAttachmentPreview:yn,onSaveAttachmentPreview:kn,onReportAttachmentPreview:Nn})))),Zn?e.createElement(Za,null):null,e.createElement(Ka,{open:on,onClose:()=>cn(!1),currentUser:bt}),e.createElement(Xa,{open:mn,onClose:Je,chat:q,onDelete:()=>{q&&pe({title:`Delete chat with ${ge(q)}?`,message:"This removes the chat from your list.",onConfirm:async()=>{ee(),await nt(q.id)&&Je()}})},onBlock:()=>{(async()=>{if(!q)return;(q.blocked?await Sn(q.id):await Bt(q.id))&&Je()})()},onReport:()=>{q&&Qe(q)}}),e.createElement(ts,{open:je,report:J,onClose:Rt}),e.createElement(ns,{open:dn,onClose:Lt,reasons:zt,value:Ie,onChange:Te,details:Et,onDetailsChange:Ae,onSubmit:Bn,targetName:de==null?void 0:de.name}),e.createElement(qa,{open:ue.open,title:ue.title,message:ue.message,confirmLabel:ue.confirmLabel,onConfirm:()=>{ue.onConfirm?ue.onConfirm():ee()},onCancel:ee}),e.createElement(Ga,{open:fe.open,title:fe.title,message:fe.message,confirmLabel:fe.confirmLabel,onConfirm:()=>{fe.onConfirm?fe.onConfirm():et()},onCancel:et}),e.createElement("input",{ref:qe,type:"file",accept:".pdf,image/png,image/jpeg,image/webp,video/mp4,video/webm,video/quicktime,.mov,.m4v",onChange:zn,style:{display:"none"}}))}const us=pa(document.getElementById("root"));us.render(e.createElement(e.StrictMode,null,e.createElement(ds,null)));
