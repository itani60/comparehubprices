import{r as n,j as s,a as fs,b as hs,c as Ns,R as bs}from"./localHub-Ddi82mor.js";import{g as T,l as v,a as ks,b as gs,c as ms,s as us,n as I,L as ys,d as vs,R as Cs,e as ws,r as Rs,f as Ls,h as _s,i as Is}from"./localHubInfoApi-DEewpdAU.js";const Ss=[{value:"Newest",label:"Newest"},{value:"Highest",label:"Highest Rated"},{value:"Lowest",label:"Lowest Rated"}];function Bs({reviews:m,ratingSummary:o,onReport:f,onHelpful:k,onReportReview:S}){const[u,g]=n.useState("Newest"),[d,C]=n.useState(!1),[B,E]=n.useState(()=>new Map),N=n.useRef(null);n.useEffect(()=>{function c(l){N.current&&(N.current.contains(l.target)||C(!1))}return document.addEventListener("click",c),()=>document.removeEventListener("click",c)},[]);const x=n.useMemo(()=>Array.isArray(m)?m:[],[m]),y=n.useMemo(()=>{const c=[...x];return u==="Highest"?c.sort((l,h)=>h.rating-l.rating||h.timestamp-l.timestamp):u==="Lowest"?c.sort((l,h)=>l.rating-h.rating||h.timestamp-l.timestamp):c.sort((l,h)=>h.timestamp-l.timestamp),c},[x,u]),w=(o&&typeof o.total=="number"?o.total:x.length)||1,R=o&&typeof o.avg=="number"?o.avg:x.reduce((c,l)=>c+(Number(l.rating)||0),0)/(x.length||1),H=n.useMemo(()=>{if(o&&o.counts)return o.counts;const c={1:0,2:0,3:0,4:0,5:0};return x.forEach(l=>{const h=Math.max(1,Math.min(5,Math.round(Number(l.rating)||0)));c[h]+=1}),c},[o,x]);return s.jsxs("section",{className:"collCard",children:[s.jsxs("div",{className:"collHead collHeadRow",children:[s.jsxs("span",{children:[s.jsx("i",{className:"fas fa-star"})," Reviews"]}),s.jsxs("div",{className:"sort-box",ref:N,children:[s.jsxs("button",{type:"button",className:"custom-dropdown",onClick:c=>{c.stopPropagation(),C(l=>!l)},children:[s.jsx("i",{className:"fas fa-sort-amount-down"})," ",s.jsx("span",{children:u})]}),s.jsx("div",{className:`dropdown-menu ${d?"show":""}`,children:Ss.map(c=>s.jsx("div",{className:`dropdown-item ${c.value===u?"active":""}`,onClick:()=>{g(c.value),C(!1)},children:c.label},c.value))})]})]}),s.jsxs("div",{className:"rating-summary-card",children:[s.jsxs("div",{className:"summary-left",children:[s.jsx("div",{className:"big-num",children:R.toFixed(1)}),s.jsx("div",{className:"stars-sm",children:Array.from({length:5},(c,l)=>s.jsx("svg",{viewBox:"0 0 24 24",style:{fill:l<Math.round(R)?"#fbbf24":"#e2e8f0"},children:s.jsx("path",{d:"M12 17.3l-6.2 3.7 1.7-7L2 8.9l7.2-.6L12 2l2.8 6.3 7.2.6-5.5 5.1 1.7 7z"})},l))}),s.jsxs("div",{className:"total-cnt",children:[w," Reviews"]})]}),s.jsx("div",{className:"summary-bars",children:[5,4,3,2,1].map(c=>s.jsxs("div",{className:"bar-row",children:[s.jsx("span",{children:c}),s.jsx("div",{className:"bar-bg",children:s.jsx("div",{className:"bar-fill",style:{width:`${Math.round(H[c]/w*100)}%`}})})]},c))})]}),s.jsx("div",{className:"rev-container",children:y.length?y.map(c=>s.jsx("div",{className:"review-row",children:(()=>{const l=B.get(c.id)||0,h=Number(c.helpful||0)+l;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rev-header",children:[s.jsx("div",{className:"rev-avatar",children:c.avatarUrl?s.jsx("img",{src:c.avatarUrl,alt:"User"}):c.initials}),s.jsxs("div",{className:"rev-meta",children:[s.jsx("div",{className:"rev-name",children:c.name}),s.jsx("div",{className:"rev-date",children:c.dateLabel}),s.jsx("div",{className:"stars-sm",style:{margin:"2px 0"},children:Array.from({length:5},(b,p)=>s.jsx("svg",{viewBox:"0 0 24 24",style:{fill:p<c.rating?"#fbbf24":"#e2e8f0"},children:s.jsx("path",{d:"M12 17.3l-6.2 3.7 1.7-7L2 8.9l7.2-.6L12 2l2.8 6.3 7.2.6-5.5 5.1 1.7 7z"})},p))})]})]}),s.jsx("div",{className:"rev-body",children:c.text}),s.jsxs("div",{className:"rev-actions",children:[s.jsxs("button",{type:"button",className:"btn-link-action",onClick:async()=>{try{await(k==null?void 0:k(c.id)),E(b=>{const p=new Map(b);return p.set(c.id,(p.get(c.id)||0)+1),p})}catch{}},children:[s.jsx("i",{className:"far fa-thumbs-up"})," Helpful"," ",s.jsxs("span",{style:{opacity:.7},children:["(",h,")"]})]}),s.jsxs("button",{type:"button",className:"btn-link-action",onClick:()=>{S?S(c.id):f==null||f()},children:[s.jsx("i",{className:"far fa-flag"})," Report"]})]})]})})()},c.id)):s.jsx("div",{style:{padding:12,color:"var(--muted)",fontWeight:900},children:"No reviews yet."})})]})}function Fs(){return s.jsxs("div",{className:"lh-skeleton",children:[s.jsxs("section",{className:"hero",children:[s.jsx("div",{className:"cover",children:s.jsx("div",{className:"logoRing",children:s.jsx("div",{className:"sk sk-circle w-120 h-120"})})}),s.jsxs("div",{className:"heroBody",children:[s.jsx("div",{className:"sk sk-rect w-220 h-16"}),s.jsx("div",{style:{height:8}}),s.jsx("div",{className:"sk sk-rect w-full h-12"}),s.jsxs("div",{className:"stats-row",style:{marginTop:14},children:[s.jsx("div",{className:"sk sk-pill w-120 h-14"}),s.jsx("div",{className:"sk sk-pill w-120 h-14"}),s.jsx("div",{className:"sk sk-pill w-120 h-14"}),s.jsx("div",{className:"sk sk-pill w-120 h-14"})]}),s.jsxs("div",{className:"actions2",style:{marginTop:14},children:[s.jsx("div",{className:"sk sk-btn w-110 h-44"}),s.jsx("div",{className:"sk sk-btn w-110 h-44"}),s.jsx("div",{className:"sk sk-btn w-110 h-44"}),s.jsx("div",{className:"sk sk-btn w-110 h-44 sk-danger"})]})]})]}),s.jsxs("section",{className:"card",children:[s.jsx("div",{className:"sk sk-rect w-180 h-14"}),s.jsx("div",{style:{height:12}}),s.jsx("div",{className:"sk sk-rect w-full h-12"}),s.jsx("div",{style:{height:10}}),s.jsx("div",{className:"sk sk-rect w-full h-12"}),s.jsx("div",{style:{height:10}}),s.jsx("div",{className:"sk sk-rect w-300 h-12"}),s.jsxs("div",{className:"social-flex",style:{marginTop:12},children:[s.jsx("div",{className:"sk sk-rect w-52 h-52"}),s.jsx("div",{className:"sk sk-rect w-52 h-52"}),s.jsx("div",{className:"sk sk-rect w-52 h-52"}),s.jsx("div",{className:"sk sk-rect w-52 h-52"}),s.jsx("div",{className:"sk sk-rect w-52 h-52"})]})]}),s.jsxs("section",{className:"collCard",children:[s.jsx("div",{className:"sk sk-rect w-180 h-14"}),s.jsx("div",{className:"prodGrid",style:{marginTop:12},children:Array.from({length:4},(m,o)=>s.jsxs("div",{className:"prodCard",children:[s.jsx("div",{className:"sk sk-rect w-full h-150"}),s.jsxs("div",{style:{padding:12,display:"grid",gap:10},children:[s.jsx("div",{className:"sk sk-rect w-180 h-12"}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[s.jsx("div",{className:"sk sk-pill w-140 h-36"}),s.jsx("div",{className:"sk sk-rect w-36 h-36"})]})]})]},o))})]}),s.jsxs("section",{className:"collCard",children:[s.jsx("div",{className:"sk sk-rect w-180 h-14"}),s.jsx("div",{style:{height:12}}),s.jsx("div",{className:"sk sk-rect w-full h-280"})]}),s.jsxs("section",{className:"collCard",children:[s.jsx("div",{className:"sk sk-rect w-180 h-14"}),s.jsx("div",{className:"rev-container",style:{marginTop:12},children:Array.from({length:2},(m,o)=>s.jsxs("div",{className:"review-row",children:[s.jsx("div",{className:"sk sk-circle w-44 h-44"}),s.jsxs("div",{style:{flex:1,display:"grid",gap:10},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[s.jsx("div",{className:"sk sk-rect w-180 h-12"}),s.jsx("div",{className:"sk sk-rect w-120 h-10"})]}),s.jsx("div",{className:"sk sk-pill w-160 h-12"}),s.jsx("div",{className:"sk sk-rect w-full h-40"}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("div",{className:"sk sk-pill w-140 h-34"}),s.jsx("div",{className:"sk sk-pill w-140 h-34"})]})]})]},o))})]})]})}function Es(){var W,z,$,V,K,G,Y,q,J,Q,X,Z,M,ss,es,as,ts,cs;const[m,o]=n.useState(!0),[f,k]=n.useState(""),[S,u]=n.useState(null),[g,d]=n.useState(""),[C,B]=n.useState(!1),[E,N]=n.useState(!1),[x,y]=n.useState(!1),[w,R]=n.useState(""),[H,c]=n.useState(!1),[l,h]=n.useState(!1),[b,p]=n.useState([]),[xs,U]=n.useState(0);function A(a,t=0){p(a),U(t),h(!0)}n.useEffect(()=>{let a=null;if(g)return a=setTimeout(()=>d(""),4e3),()=>{a&&clearTimeout(a)}},[g]);async function L({signal:a}={}){const t=T();if(!t){u(null),o(!1);return}o(!0),k("");try{const r=await _s({businessId:t,signal:a});u(Is(r))}catch(r){if(a!=null&&a.aborted)return;u(null),k(r instanceof Error?r.message:"Failed to load business details.")}finally{if(a!=null&&a.aborted)return;o(!1)}}n.useEffect(()=>{const a=new AbortController;return L({signal:a.signal}),()=>a.abort()},[]),n.useEffect(()=>{const a=T();a&&fs({businessId:a})},[]);const D=T();if(!D)return s.jsx("div",{className:"screen",children:s.jsxs("section",{className:"card",style:{borderColor:"#fecaca"},children:[s.jsx("div",{className:"cardHead",children:s.jsx("h2",{style:{color:"#b91c1c"},children:"Missing business_id"})}),s.jsx("div",{className:"cardBody",children:"Open this page with `?business_id=...`."})]})});const e=S,P=m&&!e&&!f,js=(e==null?void 0:e.logoUrl)||"";return s.jsxs("div",{className:"screen",children:[g?s.jsx("div",{style:{marginBottom:10,fontWeight:900},children:g}):null,f?s.jsxs("section",{className:"card",style:{borderColor:"#fecaca"},children:[s.jsx("div",{className:"cardHead",children:s.jsx("h2",{style:{color:"#b91c1c"},children:"Failed to load business details"})}),s.jsx("div",{className:"cardBody",children:f})]}):null,P?s.jsx(Fs,{}):null,P?null:s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"hero",children:[s.jsx("div",{className:"cover",children:s.jsx("div",{className:"logoRing",children:s.jsx("img",{src:js,alt:"Logo"})})}),s.jsxs("div",{className:"heroBody",children:[s.jsx("div",{className:"titleRow",children:s.jsxs("div",{className:"nameBlock",children:[s.jsx("h1",{className:"name",children:(e==null?void 0:e.businessName)||(m?"Loading...":"Business")}),s.jsxs("div",{className:"addr",children:[s.jsxs("svg",{className:"pin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M12 21s7-4.35 7-11a7 7 0 1 0-14 0c0 6.65 7 11 7 11z"}),s.jsx("circle",{cx:"12",cy:"10",r:"2.5"})]}),(e==null?void 0:e.addressLine)||(m?"Loading...":"Address not provided")]})]})}),s.jsxs("div",{className:"stats-row",children:[s.jsxs("div",{className:"stats-item",children:[s.jsx("span",{className:"stats-val",children:((W=e==null?void 0:e.stats)==null?void 0:W.followers)??0})," Followers"]}),s.jsxs("div",{className:"stats-item",children:[s.jsx("span",{className:"stats-val",children:((z=e==null?void 0:e.stats)==null?void 0:z.reviewCount)??0})," Reviews"]}),s.jsxs("div",{className:"stats-item",children:[s.jsx("span",{className:"stats-val",children:(($=e==null?void 0:e.stats)==null?void 0:$.likes)??0})," Likes"]}),s.jsxs("div",{className:"stats-item",children:[s.jsx("span",{className:"stats-val",children:(V=e==null?void 0:e.stats)!=null&&V.reviewCount?e.stats.averageRating.toFixed(1):"0.0"})," ","Rating"]})]}),s.jsxs("div",{className:"actions",children:[s.jsxs("button",{type:"button",className:"btn primary",disabled:!(e!=null&&e.businessId)||m,onClick:async()=>{var a;if(e!=null&&e.businessId)try{const t=!((a=e==null?void 0:e.viewer)!=null&&a.isFollowing);await v({action:t?"follow_business":"unfollow_business",payload:{business_id:e.businessId}}),d(t?"Following":"Unfollowed"),await L()}catch(t){d(t instanceof Error?t.message:"Failed to update follow.")}},children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M20 6L9 17l-5-5"})}),(K=e==null?void 0:e.viewer)!=null&&K.isFollowing?"Following":"Follow"]}),s.jsxs("a",{href:gs({recipientId:e==null?void 0:e.businessId,recipientName:e==null?void 0:e.businessName}),className:"btn ghost",onClick:a=>{ks()||(a.preventDefault(),d("Please log in to continue."))},children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})}),"Chat"]})]}),s.jsxs("div",{className:"actions2",children:[s.jsxs("button",{type:"button",className:"btn small",onClick:()=>B(!0),children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M12 17.3l-6.2 3.7 1.7-7L2 8.9l7.2-.6L12 2l2.8 6.3 7.2.6-5.5 5.1 1.7 7z"})}),"Rate"]}),s.jsxs("button",{type:"button",className:"btn small",onClick:async()=>{const a=ms({baseUrl:"/local_hub_app/",businessId:e==null?void 0:e.businessId,isMobile:!0}),t=await us({title:e!=null&&e.businessName?`${e.businessName} â€¢ LocalHub`:"LocalHub",text:e!=null&&e.businessName?`Check out ${e.businessName} on LocalHub.`:"Check this out on LocalHub.",url:a});t.method==="copy"?d("Link copied."):t.method==="share"&&d("Shared.")},children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"18",cy:"5",r:"3"}),s.jsx("circle",{cx:"6",cy:"12",r:"3"}),s.jsx("circle",{cx:"18",cy:"19",r:"3"}),s.jsx("path",{d:"M8.6 13.5l6.8 3.9M15.4 6.6L8.6 10.5"})]}),"Share"]}),s.jsxs("button",{type:"button",className:"btn small danger",onClick:()=>N(!0),children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M4 22V4"}),s.jsx("path",{d:"M4 4h13l-1.5 4L17 12H4"})]}),"Report"]})]})]})]}),s.jsxs("section",{className:"card",children:[s.jsxs("div",{className:"cardHead",children:[s.jsxs("h2",{children:["About ",(e==null?void 0:e.businessName)||"Business"]}),s.jsx("span",{className:"badge",children:"Verified"})]}),s.jsx("div",{className:"cardBody",children:m?"Loading...":(e==null?void 0:e.aboutText)||"No description provided."}),s.jsxs("div",{style:{marginTop:10},children:[s.jsx("div",{style:{fontSize:13,fontWeight:1e3,marginBottom:10},children:"Connect with us"}),s.jsxs("div",{className:"social-flex",style:{padding:0,gap:10},children:[s.jsx("a",{href:I("facebook",(G=e==null?void 0:e.social)==null?void 0:G.facebook),className:"social-item fb",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.facebook||a.preventDefault()},style:{display:(Y=e==null?void 0:e.social)!=null&&Y.facebook?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fab fa-facebook-f"})}),s.jsx("a",{href:I("twitter",(q=e==null?void 0:e.social)==null?void 0:q.twitter),className:"social-item tw",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.twitter||a.preventDefault()},style:{display:(J=e==null?void 0:e.social)!=null&&J.twitter?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fa-brands fa-x-twitter"})}),s.jsx("a",{href:I("whatsapp",(Q=e==null?void 0:e.social)==null?void 0:Q.whatsapp),className:"social-item wa",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.whatsapp||a.preventDefault()},style:{display:(X=e==null?void 0:e.social)!=null&&X.whatsapp?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fab fa-whatsapp"})}),s.jsx("a",{href:I("tiktok",(Z=e==null?void 0:e.social)==null?void 0:Z.tiktok),className:"social-item tt",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.tiktok||a.preventDefault()},style:{display:(M=e==null?void 0:e.social)!=null&&M.tiktok?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fab fa-tiktok"})}),s.jsx("a",{href:I("instagram",(ss=e==null?void 0:e.social)==null?void 0:ss.instagram),className:"social-item ig",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.instagram||a.preventDefault()},style:{display:(es=e==null?void 0:e.social)!=null&&es.instagram?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fab fa-instagram"})})]})]})]}),s.jsxs("section",{className:"collCard",children:[s.jsx("div",{style:{fontSize:13,fontWeight:1e3,marginBottom:10},children:"Featured Collections"}),s.jsx("div",{className:"prodGrid",children:((e==null?void 0:e.products)||[]).map(a=>s.jsxs("div",{className:"prodCard",role:"group",children:[s.jsx("div",{className:"prodImg",style:{cursor:"zoom-in"},onClick:()=>{hs({businessId:(e==null?void 0:e.businessId)||D,productKey:a.title||"Product"}),A(a.images,0)},role:"button",tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(hs({businessId:(e==null?void 0:e.businessId)||D,productKey:a.title||"Product"}),A(a.images,0))},children:s.jsx("img",{src:a.cover,alt:a.title})}),s.jsxs("div",{className:"prodInfo",children:[s.jsx("div",{className:"prodName",children:a.title}),s.jsx("div",{className:"product-meta-row",children:s.jsx("div",{className:"product-actions",children:(()=>{var rs,os,ds;const t=a.title||"Product",r=((rs=e==null?void 0:e.productReactions)==null?void 0:rs[t])||{},is=Number(r==null?void 0:r.total)||0,O=r!=null&&r.by_reaction&&typeof r.by_reaction=="object"?r.by_reaction:{},F=((ds=(os=e==null?void 0:e.viewer)==null?void 0:os.productReactions)==null?void 0:ds[t])||"",ns=["ðŸ‘","â¤ï¸","ðŸ”¥"],ps=ns.map(i=>({reaction:i,count:Number((O==null?void 0:O[i])??0)||0})).filter(i=>i.count>0).sort((i,j)=>j.count-i.count).slice(0,3).map(i=>i.reaction),ls=is>0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"reaction-container",children:[s.jsx("div",{className:"reactions-popover small-popover",children:ns.map(i=>s.jsx("span",{className:`emoji ${F===i?"active":""}`,onClick:async j=>{j.preventDefault(),j.stopPropagation();try{await v({action:"react_product",payload:{business_id:e==null?void 0:e.businessId,product_key:t,reaction:i,force_set:!0}}),await L()}catch(_){d(_ instanceof Error?_.message:"Failed to react.")}},title:i,"aria-label":`React ${i}`,children:i},i))}),s.jsxs("div",{className:"btn-with-count",children:[s.jsx("button",{type:"button",className:"small-btn",onClick:async i=>{i.preventDefault(),i.stopPropagation();try{await v({action:"react_product",payload:{business_id:e==null?void 0:e.businessId,product_key:t,reaction:F||"â¤ï¸",force_set:!1}}),await L()}catch(j){d(j instanceof Error?j.message:"Failed to react.")}},"aria-label":"React",children:F?s.jsx("span",{className:"my-reaction-emoji",children:F}):s.jsx("i",{className:"far fa-heart"})}),ls?s.jsx("div",{className:"emoji-stack",children:ps.map(i=>s.jsx("span",{children:i},i))}):null,ls?s.jsx("span",{className:"reaction-count",children:is}):null]})]}),s.jsx("button",{type:"button",className:"small-btn",title:"Share",onClick:i=>{i.preventDefault(),i.stopPropagation(),(async()=>{const j=ms({baseUrl:"/local_hub_app/",businessId:e==null?void 0:e.businessId,isMobile:!0}),_=await us({title:e!=null&&e.businessName?`${e.businessName} â€¢ LocalHub`:"LocalHub",text:a!=null&&a.title?`Check out "${a.title}" on LocalHub.`:"Check this out on LocalHub.",url:j});_.method==="copy"?d("Link copied."):_.method==="share"&&d("Shared.")})()},children:s.jsx("i",{className:"fas fa-share-nodes"})})]})})()})})]})]},a.title))})]}),s.jsx(ys,{address:(e==null?void 0:e.addressLine)||""}),s.jsx(Bs,{reviews:(e==null?void 0:e.reviews)||[],ratingSummary:{total:((as=e==null?void 0:e.stats)==null?void 0:as.reviewCount)??0,avg:((ts=e==null?void 0:e.stats)==null?void 0:ts.averageRating)??0,counts:((cs=e==null?void 0:e.stats)==null?void 0:cs.ratingBreakdown)||null},onReport:()=>N(!0),onHelpful:async a=>{try{await v({action:"set_review_helpful",payload:{review_id:a,helpful:!0}})}catch(t){throw d(t instanceof Error?t.message:"Failed to mark helpful."),t}},onReportReview:a=>{R(String(a||"")),y(!0)}})]}),s.jsx(vs,{open:l,slides:b,index:xs,onPrev:()=>U(a=>(a-1+b.length)%b.length),onNext:()=>U(a=>(a+1)%b.length),onClose:()=>h(!1)}),s.jsx(Cs,{open:x,onClose:()=>y(!1),busy:H,onSubmit:async({reason:a,details:t})=>{if(w){c(!0);try{await v({action:"report_review",payload:{review_id:w,reason:a||"other",details:t||""}}),d("Review reported. Thank you."),y(!1),R("")}catch(r){d(r instanceof Error?r.message:"Failed to submit report.")}finally{c(!1)}}}}),s.jsx(ws,{open:E,onClose:()=>N(!1),businessId:(e==null?void 0:e.businessId)||"",onSubmit:async({businessId:a,reason:t,details:r})=>{await Rs({businessId:a,reason:t,details:r}),d("Report received. Our team will review this business shortly.")}}),s.jsx(Ls,{open:C,onClose:()=>B(!1),businessId:(e==null?void 0:e.businessId)||"",onSubmit:async({businessId:a,rating:t,content:r})=>{await v({action:"upsert_review",payload:{business_id:a,rating:t,content:r}}),d("Success! Your review has been submitted."),await L()}})]})}Ns.createRoot(document.getElementById("root")).render(s.jsx(bs.StrictMode,{children:s.jsx(Es,{})}));
