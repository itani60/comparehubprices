import{r as s,j as n,s as J,t as ae,f as Me,c as Le,R as Te}from"./localHub-BbJY8JdF.js";function _e({slides:e}){const[a,l]=s.useState(0),g=s.useMemo(()=>Array.isArray(e)?e:[],[e]),u=s.useRef(null);if(g.length===0)return null;const f=g.length,w=100/f;return s.useEffect(()=>{l(0)},[f]),s.useEffect(()=>{if(f<=1)return;function p(){u.current||(u.current=setInterval(()=>{l(y=>(y+1)%f)},1e4))}function c(){u.current&&(clearInterval(u.current),u.current=null)}return p(),()=>c()},[f]),n.jsxs("div",{className:"carousel",onMouseEnter:()=>{u.current&&(clearInterval(u.current),u.current=null)},onMouseLeave:()=>{f<=1||u.current||(u.current=setInterval(()=>{l(p=>(p+1)%f)},1e4))},children:[n.jsx("div",{className:"carousel-inner",style:{width:`${f*100}%`,transform:`translateX(-${a*w}%)`},children:g.map((p,c)=>n.jsx("div",{className:"carousel-slide",style:{width:`${w}%`,flex:`0 0 ${w}%`},children:n.jsx("img",{src:p.url,alt:p.alt,onError:y=>{var k;y.currentTarget.onerror=null;const x=p&&typeof p.fallbackUrl=="string"?p.fallbackUrl:((k=g[0])==null?void 0:k.url)||"";y.currentTarget.src=x}})},`${p.url}-${c}`))}),n.jsx("div",{className:"carousel-dots",children:g.map((p,c)=>n.jsx("span",{className:`dot ${c===a?"active":""}`,onClick:()=>l(c)},c))})]})}const ge="lh_profile_impressions_v1";let E;function me(){if(E||(E=new Set,typeof window>"u"))return E;try{const e=window.sessionStorage.getItem(ge),a=e?JSON.parse(e):[];Array.isArray(a)&&a.forEach(l=>{typeof l=="string"&&l.trim().length&&E.add(l)})}catch{}return E}function le(e){return e?me().has(String(e)):!1}function oe(e){if(!e)return;const a=me(),l=String(e);if(!a.has(l)&&(a.add(l),!(typeof window>"u")))try{window.sessionStorage.setItem(ge,JSON.stringify(Array.from(a)))}catch{}}function Ee(e){const a=Number(e);if(!Number.isFinite(a)||a<=0)return null;const l=Math.max(1,Math.min(5,Math.round(a))),g=5-l;return[...Array.from({length:l},(u,f)=>n.jsx("i",{className:"fa-solid fa-star"},`filled-${f}`)),...Array.from({length:g},(u,f)=>n.jsx("i",{className:"fa-regular fa-star"},`empty-${f}`))]}function Ie({business:e}){const a=(e==null?void 0:e.name)||"Business",l=Number(e.rating),g=Number.isFinite(l)&&l>0,u=(e==null?void 0:e.businessType)||(e==null?void 0:e.category)||"Services",f=!!(e!=null&&e.isVerified||e!=null&&e.verified||e!=null&&e.is_verified),w="/local_hub_app/images/verified-badge.svg",p=s.useRef(null),c=s.useRef(null),y=s.useMemo(()=>`https://ui-avatars.com/api/?name=${encodeURIComponent(a)}&background=random&color=fff`,[a]),x=s.useMemo(()=>{const d=typeof e.logo=="string"?e.logo.trim():"";return d.length?d:y},[y,e.logo]),k=s.useMemo(()=>{const d=J({title:a,subtitle:"No product image"}),N=J({title:a,subtitle:"Image unavailable"}),h=Array.isArray(e.images)?e.images.filter(j=>typeof j=="string"&&j.trim().length>0):typeof e.image=="string"&&e.image.trim().length>0?[e.image.trim()]:[],S=Array.from(new Set(h)),i=[];for(let j=0;j<Math.min(4,S.length);j++)i.push(S[j]);for(;i.length<4;)i.push(d);return i.map((j,L)=>({url:j,alt:`${a} product image`,fallbackUrl:N,isPlaceholder:j===d}))},[e.image,e.images,a]);return s.useEffect(()=>{if(!(e!=null&&e.id)||le(e.id)||typeof window>"u")return;const d=p.current;if(!d)return;if(!("IntersectionObserver"in window)){oe(e.id),ae({businessId:e.id});return}let N=!1;const h=new IntersectionObserver(S=>{const i=S[0];if(!i||N)return;i.isIntersecting&&i.intersectionRatio>=.5?c.current==null&&(c.current=window.setTimeout(()=>{if(c.current=null,N||le(e.id))return;const L=d.getBoundingClientRect(),A=Math.min(L.bottom,window.innerHeight)-Math.max(L.top,0);(L.height>0?A/L.height:0)<.5||(oe(e.id),ae({businessId:e.id}),h.disconnect())},1e3)):c.current!=null&&(clearTimeout(c.current),c.current=null)},{threshold:[0,.5,1]});return h.observe(d),()=>{N=!0,c.current!=null&&(clearTimeout(c.current),c.current=null),h.disconnect()}},[e==null?void 0:e.id]),n.jsxs("div",{className:"card",ref:p,children:[n.jsxs("div",{className:"biz-header",children:[n.jsx("img",{src:x,alt:`${a} logo`,className:"biz-avatar",onError:d=>{d.currentTarget.onerror=null,d.currentTarget.src=y}}),n.jsx("div",{children:n.jsxs("div",{className:"biz-name",children:[a,f?n.jsx("img",{src:w,alt:"Verified",className:"verified-badge",title:"Verified business","aria-label":"Verified business"}):null]})})]}),n.jsx(_e,{slides:k}),n.jsxs("div",{className:"biz-address",children:[n.jsx("i",{className:"fa-solid fa-location-dot",style:{alignSelf:"flex-start",marginTop:3}}),n.jsxs("div",{children:[n.jsx("div",{style:{fontWeight:600},children:e.address||"Address not provided"}),n.jsx("div",{style:{fontSize:"0.8em",opacity:.8},children:[e.suburb,e.village,e.town].filter(Boolean).join(", ")||"Location not provided"}),n.jsx("div",{style:{fontSize:"0.8em",opacity:.8},children:e.province||""})]})]}),n.jsx("div",{className:"biz-rating",style:{marginTop:8},children:g?n.jsxs(n.Fragment,{children:[Ee(l)," ",n.jsxs("span",{children:["(",l.toFixed(1),")"]})]}):n.jsx("span",{className:"no-rating",children:"No ratings yet"})}),n.jsx("div",{className:"badge",style:{marginTop:6},children:u}),n.jsx("a",{href:`/local_hub_app/local_hub_info.html?business_id=${encodeURIComponent(e.id||"")}`,className:"view-details-btn",onClick:d=>{var h,S;(S=(h=window.matchMedia)==null?void 0:h.call(window,"(max-width: 640px)"))!=null&&S.matches&&(d.preventDefault(),window.location.href=`/local_hub_app/local_hub_info_mobile.html?business_id=${encodeURIComponent(e.id||"")}`)},children:n.jsx("span",{children:"View Details"})})]})}function se(e){return typeof e=="string"?{value:e,label:e}:e}function R({id:e,label:a,value:l,items:g,allOption:u,onChange:f,containerClassName:w="filter-box",labelClassName:p="filter-label",disabled:c=!1}){const y=s.useRef(null),[x,k]=s.useState(!1),d=s.useMemo(()=>(g||[]).map(se),[g]),N=s.useMemo(()=>se(u),[u]),h=s.useMemo(()=>{const i=d.find(j=>j.value===l);return(i==null?void 0:i.label)??N.label},[N.label,d,l]);s.useEffect(()=>{c&&k(!1)},[c]),s.useEffect(()=>{function i(j){y.current&&(y.current.contains(j.target)||k(!1))}return document.addEventListener("click",i),()=>document.removeEventListener("click",i)},[]);function S(i){f(i),k(!1)}return n.jsxs("div",{className:w,style:{zIndex:x?3:1},children:[a?n.jsx("label",{className:p,htmlFor:e,children:a}):null,n.jsxs("div",{className:`custom-dropdown ${x?"active":""}`,ref:y,children:[n.jsxs("button",{id:e,type:"button",className:"custom-dropdown-btn","aria-haspopup":"listbox","aria-expanded":x,disabled:c,onClick:i=>{i.stopPropagation(),!c&&k(j=>!j)},children:[n.jsx("span",{children:h}),n.jsx("i",{className:"fas fa-chevron-down"})]}),n.jsx("div",{className:"custom-dropdown-menu",role:"listbox","aria-label":a,children:n.jsxs("div",{className:"custom-dropdown-items",children:[n.jsx("div",{className:`custom-dropdown-item ${l===N.value?"selected":""}`,role:"option","aria-selected":l===N.value,onClick:()=>S(N.value),children:N.label}),d.map(i=>n.jsx("div",{className:`custom-dropdown-item ${l===i.value?"selected":""}`,role:"option","aria-selected":l===i.value,onClick:()=>S(i.value),children:i.label},i.value))]})})]})]})}const ce={limpopo:["Tzaneen","Louis Trichardt","Polokwane","Lephalale","Mokopane","Modimolle","Musina","Phalaborwa","Bela-Bela","Thohoyandou","Thabazimbi","Giyani","Lebowakgomo","Seshego","Burgersfort","Malamulele","Vuwani","Sibasa","Mphephu"],gauteng:["Johannesburg","Vereeniging","Heidelberg","Pretoria","Krugersdorp","Centurion","Thokoza","Randfontein","Carletonville","Alberton","Vanderbijlpark","Soweto","Springs","Thembisa","Boksburg","Randburg","Benoni","Bophelong","Alexandra","Mamelodi","Tsakani","Duduza","Refilwe","Vosloorus","Wattville","Sebokeng","Hammanskraal","Evaton","Khutsong","Katlehong","Kagiso","Zithobeni","Reiger Park","Midrand","Sharpeville","Muldersdrift","Roodepoort","Meyerton"],"western-cape":["Cape Town","Stellenbosch","Paarl","Franschhoek","George","Mossel Bay","Knysna","Hermanus","Worcester","Somerset West","Bellville","Claremont"],"kwazulu-natal":["Durban","Pietermaritzburg","Umhlanga","Pinetown","Richards Bay","Newcastle","Ladysmith","Empangeni","Ballito","Margate"],"eastern-cape":["Gqeberha","Port Elizabeth","East London","Mthatha","Grahamstown","King William's Town","Jeffreys Bay","Uitenhage"],mpumalanga:["Mbombela","Nelspruit","Witbank","eMalahleni","Middelburg","Secunda","White River","Hazyview"],"north-west":["Mahikeng","Rustenburg","Klerksdorp","Potchefstroom","Brits","Zeerust","Lichtenburg"],"free-state":["Bloemfontein","Welkom","Sasolburg","Bethlehem","Kroonstad","Parys","Harrismith"],"northern-cape":["Kimberley","Upington","Springbok","Kuruman","De Aar","Port Nolloth"]},G=12,fe="lh_user_location_v1",ie=[{value:"all",label:"All Categories"},{value:"service",label:"Service"},{value:"beauty",label:"Beauty & Wellness"},{value:"health",label:"Health Care"},{value:"retail",label:"Retail"}],ue=[{value:"relevance",label:"Relevance"},{value:"rating",label:"Highest Rated"},{value:"popular",label:"Most Popular"},{value:"newest",label:"Newest"},{value:"distance",label:"Distance"}];function T(e){return String(e||"").trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function D(e){return String(e||"").split("-").filter(Boolean).map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}function de(e){const a=`; ${document.cookie||""}`.split(`; ${e}=`);return a.length!==2?"":a.pop().split(";").shift()||""}function Re(){return!!(de("standard_session_id")||de("business_session_id"))}function Ae(){try{const e=sessionStorage.getItem(fe);if(!e)return null;const a=JSON.parse(e);if(!a||typeof a!="object")return null;const l=typeof a.province=="string"?a.province.trim():"",g=typeof a.provinceSlug=="string"?a.provinceSlug.trim():"",u=typeof a.suburb=="string"?a.suburb.trim():"";if(!u||!l&&!g)return null;const f=typeof a.placeType=="string"?a.placeType.trim():"suburb";return{province:l||g,suburb:u,placeType:f||"suburb"}}catch{return null}}function Pe(e){const a=[],l=g=>{if(g){if(Array.isArray(g)){g.forEach(l);return}if(typeof g=="string"){const u=T(g);u&&a.push(u)}}};return l(e==null?void 0:e.category),l(e==null?void 0:e.businessCategory),l(e==null?void 0:e.categories),l(e==null?void 0:e.categoryTags),l(e==null?void 0:e.businessCategories),l(e==null?void 0:e.businessType),Array.from(new Set(a))}function $e(e){var g,u,f,w,p,c,y;const a=Number((e==null?void 0:e.latitude)??(e==null?void 0:e.lat)??((g=e==null?void 0:e.location)==null?void 0:g.lat)??((u=e==null?void 0:e.coordinates)==null?void 0:u.lat)??((f=e==null?void 0:e.coordinates)==null?void 0:f.latitude)),l=Number((e==null?void 0:e.longitude)??(e==null?void 0:e.lng)??((w=e==null?void 0:e.location)==null?void 0:w.lng)??((p=e==null?void 0:e.location)==null?void 0:p.lon)??((c=e==null?void 0:e.coordinates)==null?void 0:c.lng)??((y=e==null?void 0:e.coordinates)==null?void 0:y.longitude));return!Number.isFinite(a)||!Number.isFinite(l)?null:{lat:a,lng:l}}function Be(e,a){const l=c=>c*Math.PI/180,g=l(a.lat-e.lat),u=l(a.lng-e.lng),f=l(e.lat),w=l(a.lat),p=Math.sin(g/2)**2+Math.cos(f)*Math.cos(w)*Math.sin(u/2)**2;return 2*6371*Math.asin(Math.sqrt(p))}function Oe(){const[e,a]=s.useState([]),[l,g]=s.useState(!0),[u,f]=s.useState(""),[w,p]=s.useState(!1),[c,y]=s.useState(""),[x,k]=s.useState("all"),[d,N]=s.useState("all"),[h,S]=s.useState("all"),[i,j]=s.useState("relevance"),[L,A]=s.useState(G),[P,q]=s.useState(null),[Y,he]=s.useState(!1),[pe,_]=s.useState(!1),U=s.useRef(null),[H,Z]=s.useState(!1),[X,Q]=s.useState(""),[b,z]=s.useState(""),[I,K]=s.useState("suburb"),[ve,$]=s.useState(!1);s.useEffect(()=>{const t=new AbortController;return g(!0),f(""),Me({limit:200,offset:0,signal:t.signal}).then(r=>{a(Array.isArray(r)?r:[])}).catch(r=>{t.signal.aborted||f(r instanceof Error?r.message:"Failed to load businesses.")}).finally(()=>{t.signal.aborted||g(!1)}),()=>t.abort()},[]),s.useEffect(()=>{const t=Ae();t&&(Q(t.province),z(t.suburb),K(t.placeType||"suburb")),!t&&!Re()&&Z(!0)},[]),s.useEffect(()=>(H?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[H]),s.useEffect(()=>{function t(r){U.current&&(U.current.contains(r.target)||_(!1))}return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[]),s.useEffect(()=>{A(G)},[c,x,d,h,i]),s.useEffect(()=>{i!=="distance"||Y||(he(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{q({lat:t.coords.latitude,lng:t.coords.longitude})},()=>{q(null)},{enableHighAccuracy:!1,timeout:6e3,maximumAge:3e5}))},[i,Y]);const ee=s.useMemo(()=>Object.keys(ce).sort().map(t=>({value:t,label:D(t)})),[]),B=d==="all",W=s.useMemo(()=>B?[]:(ce[d]||[]).slice().sort(),[B,d]),O=s.useMemo(()=>{let t=e.slice();if(x!=="all"){const o={service:["service"],beauty:["beauty","wellness","salon","spa"],health:["health","medical","clinic","pharmacy"],retail:["retail","store","shop","market"]}[x]||[x];t=t.filter(m=>{const v=Pe(m);if(v.length)return v.includes(x);const C=T((m==null?void 0:m.businessType)||(m==null?void 0:m.category));return o.some(M=>C.includes(M)||C===M)})}return d!=="all"&&(t=t.filter(r=>T(r==null?void 0:r.province)===d)),h!=="all"&&(t=t.filter(r=>{const o=T(r==null?void 0:r.town),m=T(r==null?void 0:r.village),v=T(r==null?void 0:r.suburb);return o===h||m===h||v===h})),t},[e,x,h,d]),V=s.useMemo(()=>{let t=O.slice();const r=c.trim().toLowerCase();if(r&&(t=t.filter(o=>{const m=String((o==null?void 0:o.name)||"").toLowerCase(),v=String((o==null?void 0:o.businessType)||(o==null?void 0:o.category)||"").toLowerCase(),C=String((o==null?void 0:o.town)||"").toLowerCase(),M=String((o==null?void 0:o.village)||"").toLowerCase(),F=String((o==null?void 0:o.suburb)||"").toLowerCase(),ke=String((o==null?void 0:o.address)||"").toLowerCase();return m.includes(r)||v.includes(r)||C.includes(r)||M.includes(r)||F.includes(r)||ke.includes(r)})),i==="rating")t.sort((o,m)=>(Number(m==null?void 0:m.rating)||0)-(Number(o==null?void 0:o.rating)||0));else if(i==="popular")t.sort((o,m)=>(Number(m==null?void 0:m.followers)||0)-(Number(o==null?void 0:o.followers)||0));else if(i==="newest")t.sort((o,m)=>{const v=new Date((o==null?void 0:o.createdAt)||0).getTime();return new Date((m==null?void 0:m.createdAt)||0).getTime()-v});else if(i==="distance"&&P){const o=t.map(v=>{const C=$e(v),M=C?Be(P,C):Number.POSITIVE_INFINITY;return{...v,_distance:M}});o.some(v=>Number.isFinite(v._distance)&&v._distance<Number.POSITIVE_INFINITY)&&(t=o.sort((v,C)=>v._distance-C._distance).map(v=>{const{_distance:C,...M}=v;return M}))}return t},[O,c,i,P]),ye=s.useMemo(()=>V.slice(0,L),[V,L]),xe=L<V.length,te=s.useMemo(()=>{const t=c.trim().toLowerCase();return t?O.filter(r=>{const o=String((r==null?void 0:r.name)||"").toLowerCase(),m=String((r==null?void 0:r.businessType)||(r==null?void 0:r.category)||"").toLowerCase(),v=String((r==null?void 0:r.town)||"").toLowerCase(),C=String((r==null?void 0:r.village)||"").toLowerCase(),M=String((r==null?void 0:r.suburb)||"").toLowerCase();return o.includes(t)||m.includes(t)||v.includes(t)||C.includes(t)||M.includes(t)}).slice(0,6):[]},[O,c]),ne=pe&&c.trim().length>0,je=!!(c.trim()||x!=="all"||d!=="all"||h!=="all"||i!=="relevance"),re=s.useMemo(()=>{const t=[],r=h!=="all"?W.find(o=>T(o)===h)||D(h):"";if(c.trim()&&t.push({label:`Search: "${c.trim()}"`,onClear:()=>y("")}),x!=="all"){const o={service:"Service",beauty:"Beauty & Wellness",health:"Health Care",retail:"Retail"};t.push({label:o[x]||x,onClear:()=>k("all")})}if(d!=="all"&&t.push({label:D(d),onClear:()=>{N("all"),S("all")}}),h!=="all"&&t.push({label:r||h,onClear:()=>S("all")}),i!=="relevance"){const o={rating:"Highest Rated",popular:"Most Popular",newest:"Newest",distance:"Distance"};t.push({label:o[i]||i,onClear:()=>j("relevance")})}return t},[x,h,W,d,c,i]);function Ne(){y(""),k("all"),N("all"),S("all"),j("relevance")}const Se="/local_hub_app/logo/localhub_logo.png",we="/local_hub_app/images/verified-badge.svg";function Ce(){const t=String(X||"").trim(),r=String(b||"").trim();if(!t||!r){$(!0);return}const o={province:D(t),provinceSlug:t,suburb:r,placeType:I==="village"?"village":"suburb",updatedAt:new Date().toISOString()};try{sessionStorage.setItem(fe,JSON.stringify(o))}catch{}$(!1),Z(!1)}return n.jsxs("div",{className:"page-shell",style:{"--bg-image":"url(/local_hub_app/images/background.png)"},children:[H?n.jsx("div",{className:"location-modal active",children:n.jsxs("div",{className:"location-card",role:"dialog","aria-modal":"true","aria-labelledby":"locationTitle",children:[n.jsx("h3",{id:"locationTitle",children:"Set your location"}),n.jsx("p",{children:"Please enter your province and suburb/village to continue."}),n.jsx(R,{id:"modalProvinceDropdown",label:"Province:",value:X,allOption:{value:"",label:"Select Province"},items:ee,onChange:t=>{Q(t),$(!1)}}),n.jsxs("div",{className:"location-field",children:[n.jsx("label",{children:"Choose one"}),n.jsxs("div",{className:"location-type-toggle",role:"group","aria-label":"Select location type",children:[n.jsx("button",{type:"button",className:`location-type-btn ${I==="suburb"?"active":""}`,onClick:()=>K("suburb"),children:"Suburb"}),n.jsx("button",{type:"button",className:`location-type-btn ${I==="village"?"active":""}`,onClick:()=>K("village"),children:"Village"})]})]}),n.jsxs("div",{className:"location-field",children:[n.jsx("label",{htmlFor:"modalSuburbInput",children:I==="village"?"Village":"Suburb"}),n.jsx("input",{id:"modalSuburbInput",type:"text",value:b,onChange:t=>{z(t.target.value),$(!1)},placeholder:I==="village"?"e.g. KwaMhlanga":"e.g. Orlando West"})]}),ve?n.jsx("div",{className:"location-error",children:"Please enter both province and suburb/village."}):null,n.jsx("div",{className:"location-actions",children:n.jsx("button",{type:"button",className:"location-save",onClick:Ce,children:"Save"})})]})}):null,n.jsxs("div",{className:"page",children:[n.jsx("div",{className:"hero",children:n.jsx("img",{src:Se,alt:"LocalHub",className:"hero-logo"})}),n.jsxs("div",{className:"search-card",children:[n.jsxs("div",{className:"search-wrapper",ref:U,children:[n.jsx("input",{type:"text",value:c,onChange:t=>{y(t.target.value),_(!0)},onFocus:()=>_(!0),placeholder:"Search a business, product, or neighborhood...",disabled:l}),n.jsx("button",{type:"button",className:`search-clear-btn ${c?"visible":""}`,"aria-label":"Clear search",onClick:()=>{y(""),_(!1)},children:"x"}),n.jsx("div",{className:`search-suggestions ${ne?"visible":""}`,children:ne?te.length?te.map(t=>{const r=(t==null?void 0:t.name)||"Business",o=typeof(t==null?void 0:t.logo)=="string"&&t.logo.trim().length?t.logo.trim():`https://ui-avatars.com/api/?name=${encodeURIComponent(r)}&background=random&color=fff`,m=[t==null?void 0:t.suburb,t==null?void 0:t.village,t==null?void 0:t.town,t==null?void 0:t.province].filter(Boolean),v=m.length?m.join(" â€¢ "):"Local business",C=(t==null?void 0:t.businessType)||(t==null?void 0:t.category)||"Services",M=!!(t!=null&&t.isVerified||t!=null&&t.verified||t!=null&&t.is_verified);return n.jsx("button",{type:"button",className:"search-suggestion",onClick:()=>{y(r),_(!1)},children:n.jsxs("span",{className:"suggestion-row",children:[n.jsx("img",{src:o,alt:`${r} logo`,className:"suggestion-avatar",onError:F=>{F.currentTarget.onerror=null,F.currentTarget.src=J({title:"Logo",subtitle:r})}}),n.jsxs("span",{className:"suggestion-text",children:[n.jsxs("span",{className:"suggestion-title",children:[r,M?n.jsx("img",{src:we,alt:"Verified",className:"suggestion-verified",title:"Verified business","aria-label":"Verified business"}):null]}),n.jsx("span",{className:"suggestion-badge",children:C}),n.jsx("span",{className:"suggestion-meta",children:v})]})]})},`${t.id}-suggestion`)}):n.jsx("div",{className:"search-suggestion empty",children:"No matches found"}):null})]}),n.jsx("button",{type:"button",onClick:()=>_(!1),children:"Search"})]}),n.jsxs("div",{className:"filter-toggle-row",children:[n.jsx("button",{type:"button",className:"filter-toggle-btn",onClick:()=>p(t=>!t),disabled:l,children:w?"Hide Filters":"Show Filters"}),n.jsx("button",{type:"button",className:"clear-filters-btn",onClick:Ne,disabled:l,style:{display:je?"inline-flex":"none"},children:"Clear Filters"})]}),n.jsxs("div",{className:`filter-bar ${w?"":"hidden"}`,children:[n.jsx(R,{id:"categoryDropdown",label:"Category:",value:x,allOption:ie[0],items:ie.slice(1),onChange:k}),n.jsx(R,{id:"provinceDropdown",label:"Province:",value:d,allOption:{value:"all",label:"All Provinces"},items:ee,onChange:t=>{N(t),S("all")}}),n.jsx(R,{id:"locationDropdown",label:"Location:",value:h,allOption:{value:"all",label:B?"Select Province First":"All Locations"},items:W.map(t=>({value:T(t),label:t})),onChange:S,disabled:B}),n.jsx(R,{id:"sortDropdown",label:"Sort by:",value:i,allOption:ue[0],items:ue.slice(1),onChange:j})]}),re.length?n.jsx("div",{className:"active-filters",children:re.map(t=>n.jsxs("span",{className:"filter-chip",children:[t.label,n.jsx("button",{type:"button",onClick:t.onClear,"aria-label":`Clear ${t.label}`,children:"x"})]},t.label))}):null,u?n.jsxs("div",{className:"error-state",children:[n.jsx("h3",{children:"Failed to load businesses"}),n.jsx("p",{children:u})]}):null,n.jsxs("div",{className:"business-grid",children:[l?n.jsx("div",{className:"skeleton-grid",style:{gridColumn:"1 / -1"},children:Array.from({length:6},(t,r)=>n.jsxs("div",{className:"skeleton-card",children:[n.jsx("div",{className:"skeleton-line small"}),n.jsx("div",{className:"skeleton-line tiny"}),n.jsx("div",{className:"skeleton-box"}),n.jsx("div",{className:"skeleton-line"}),n.jsx("div",{className:"skeleton-line small"})]},r))}):null,!l&&!u?ye.map(t=>n.jsx(Ie,{business:t},t.id)):null,!l&&!u&&V.length===0?n.jsxs("div",{className:"empty-state",children:[n.jsx("h3",{children:"No results found"}),n.jsx("p",{children:"Try adjusting your filters or search term."})]}):null]}),!l&&!u&&xe?n.jsx("div",{className:"load-more-row",children:n.jsx("button",{type:"button",className:"load-more-btn",onClick:()=>A(t=>t+G),children:"Load more"})}):null]})]})}Le.createRoot(document.getElementById("root")).render(n.jsx(Te.StrictMode,{children:n.jsx(Oe,{})}));
