import{r as c,j as e}from"./localHub-DHLivfa6.js";function L({open:n,slides:r,index:s,onPrev:a,onNext:t,onClose:i}){const l=c.useMemo(()=>Array.isArray(r)?r:[],[r]),p=l[s]||l[0],m=l.length>1,o=c.useRef("");return c.useEffect(()=>{if(!n)return;o.current=document.body.style.overflow||"",document.body.style.overflow="hidden";function d(h){h.key==="Escape"&&(i==null||i()),m&&(h.key==="ArrowRight"&&(t==null||t()),h.key==="ArrowLeft"&&(a==null||a()))}return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d),document.body.style.overflow=o.current,o.current=""}},[m,i,t,a,n]),n?e.jsxs("div",{className:"modal-overlay active",onClick:i,role:"dialog","aria-modal":"true",children:[e.jsx("button",{type:"button",className:"lightbox-close",id:"closeLightbox",onClick:d=>{d.stopPropagation(),i==null||i()},"aria-label":"Close",children:e.jsx("i",{className:"fas fa-times"})}),m?e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",className:"lightbox-nav prev",onClick:d=>{d.stopPropagation(),a==null||a()},"aria-label":"Previous",children:e.jsx("i",{className:"fas fa-chevron-left"})}),e.jsx("button",{type:"button",className:"lightbox-nav next",onClick:d=>{d.stopPropagation(),t==null||t()},"aria-label":"Next",children:e.jsx("i",{className:"fas fa-chevron-right"})})]}):null,e.jsx("div",{className:"lightbox-content",onClick:d=>d.stopPropagation(),children:e.jsx("img",{src:p,alt:"Preview"})}),m?e.jsxs("div",{className:"lightbox-counter",id:"lightboxCounter",children:[Math.min(s+1,l.length)," / ",l.length||1]}):null]}):null}function F({open:n,onClose:r,businessId:s,onSubmit:a}){const[t,i]=c.useState(0),[l,p]=c.useState(""),[m,o]=c.useState(!1),[d,h]=c.useState(""),g=c.useMemo(()=>t>0&&!!s&&!m,[s,m,t]);return n?e.jsx("div",{className:"modal-overlay active",id:"rateModal",onClick:r,role:"dialog","aria-modal":"true","aria-label":"Rate your experience",children:e.jsxs("div",{className:"modal-content rate-modal",onClick:f=>f.stopPropagation(),children:[e.jsx("button",{type:"button",className:"modal-close",onClick:r,"aria-label":"Close",children:e.jsx("i",{className:"fas fa-times"})}),e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",style:{color:"var(--text)"},children:"Rate your experience"}),e.jsx("p",{className:"modal-subtitle",children:"We appreciate your feedback!"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"rating-stars",id:"starContainer",children:Array.from({length:5},(f,b)=>{const v=b+1,j=v<=t;return e.jsx("i",{className:`fas fa-star${j?" active":""}`,"data-value":v,role:"button",tabIndex:0,"aria-label":`${v} star`,onClick:()=>i(v),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&i(v)}},v)})}),e.jsx("textarea",{className:"report-textarea",value:l,onChange:f=>p(f.target.value),placeholder:"Write your thoughts here...",id:"reviewText",style:{height:120}}),d?e.jsx("div",{className:"rate-modal-error",children:d}):null,e.jsx("button",{type:"button",className:"btn-submit",id:"submitReview",disabled:!g,onClick:async()=>{if(s){o(!0),h("");try{await(a==null?void 0:a({businessId:s,rating:t,content:l})),i(0),p(""),r==null||r()}catch(f){h(f instanceof Error?f.message:"Failed to submit review.")}finally{o(!1)}}},children:m?"Posting...":"Post Review"})]})]})}):null}const R=[{value:"spam",label:"Spam or misleading content"},{value:"inappropriate",label:"Inappropriate content"},{value:"fraud",label:"Fraud or scam activity"},{value:"other",label:"Other issues"}];function _({open:n,onClose:r,businessId:s,onSubmit:a}){const[t,i]=c.useState("spam"),[l,p]=c.useState(""),[m,o]=c.useState(null),[d,h]=c.useState(""),[g,f]=c.useState(!1),[b,v]=c.useState(""),j=c.useMemo(()=>!!t&&!!s&&!g,[s,g,t]);return n?e.jsx("div",{className:"modal-overlay active",id:"reportModal",onClick:r,role:"dialog","aria-modal":"true","aria-label":"Report Business",children:e.jsxs("div",{className:"modal-content report-modal",onClick:u=>u.stopPropagation(),children:[e.jsx("button",{type:"button",className:"modal-close",onClick:r,"aria-label":"Close",children:e.jsx("i",{className:"fas fa-times"})}),e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",children:"Report Business"}),e.jsx("p",{className:"modal-subtitle",children:"Help us understand what's happening."})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{className:"report-options",children:R.map(u=>e.jsxs("label",{className:`report-option ${t===u.value?"selected":""}`,children:[e.jsx("input",{type:"radio",name:"report_reason",value:u.value,checked:t===u.value,onChange:()=>i(u.value)}),e.jsx("span",{className:"report-radio-custom"}),e.jsx("span",{children:u.label})]},u.value))}),e.jsx("textarea",{className:"report-textarea",placeholder:"Provide additional details (optional)...",id:"reportDetails",value:l,onChange:u=>p(u.target.value)}),e.jsxs("div",{className:"upload-container",children:[e.jsxs("div",{className:"upload-box",id:"uploadBox",children:[e.jsx("i",{className:"fas fa-camera"}),e.jsx("p",{children:"Tap to upload evidence"}),e.jsx("input",{type:"file",id:"reportImage",accept:"image/*",onChange:u=>{var w;const x=((w=u.target.files)==null?void 0:w[0])||null;if(o(x),v(""),!x){h("");return}const y=new FileReader;y.onload=k=>{var N;return h(String(((N=k.target)==null?void 0:N.result)||""))},y.readAsDataURL(x)}})]}),e.jsxs("div",{className:"upload-preview",id:"imagePreview",style:{display:d?"block":"none"},children:[e.jsx("img",{src:d||"",alt:"preview",id:"previewImg"}),e.jsx("button",{type:"button",className:"remove-img",id:"removeImg","aria-label":"Remove image",onClick:()=>{o(null),h("")},children:e.jsx("i",{className:"fas fa-times"})})]})]}),b?e.jsx("div",{className:"report-modal-error",children:b}):null,e.jsx("button",{type:"button",className:"btn-report-submit",id:"submitReport",disabled:!j,onClick:async()=>{if(!s)return;const x=!!m?" (evidence attached in UI)":"";f(!0),v("");try{await(a==null?void 0:a({businessId:s,reason:t,details:`${l}${x}`.trim()})),p(""),o(null),h(""),r==null||r()}catch(y){v(y instanceof Error?y.message:"Failed to submit report.")}finally{f(!1)}},children:g?"Submitting...":"Submit Report"})]})]})}):null}function $({address:n}){const r=c.useMemo(()=>`https://www.google.com/maps?q=${encodeURIComponent(n||"Johannesburg, Gauteng")}&output=embed`,[n]);return e.jsxs("section",{className:"collCard locationCard",children:[e.jsx("div",{className:"collHead",children:"Our Location"}),e.jsx("div",{className:"map-box",children:e.jsx("iframe",{src:r,width:"100%",height:"100%",style:{border:0},allowFullScreen:!0,loading:"lazy",referrerPolicy:"no-referrer-when-downgrade",title:"Map"})})]})}const S=[{value:"spam",label:"Spam or misleading"},{value:"offensive",label:"Inappropriate or offensive"},{value:"fake",label:"Fake or biased review"}];function A({open:n,onClose:r,onSubmit:s,busy:a}){const[t,i]=c.useState("spam"),[l,p]=c.useState(""),m=c.useMemo(()=>!!t&&!a,[a,t]);return n?e.jsx("div",{className:"modal-overlay active",onClick:r,role:"dialog","aria-modal":"true","aria-label":"Report Review",children:e.jsxs("div",{className:"modal-content",onClick:o=>o.stopPropagation(),children:[e.jsx("button",{type:"button",className:"modal-close",onClick:r,"aria-label":"Close",children:e.jsx("i",{className:"fas fa-times"})}),e.jsxs("div",{className:"modal-header",children:[e.jsx("h3",{className:"modal-title",style:{color:"#ff4757"},children:"Report Review"}),e.jsx("p",{className:"modal-subtitle",children:"Why are you reporting this review?"})]}),e.jsxs("div",{className:"modal-body",children:[e.jsx("div",{style:{display:"grid",gap:10},children:S.map(o=>e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:10,padding:"10px 12px",borderRadius:12,border:"1px solid rgba(229,231,235,.9)",cursor:"pointer"},children:[e.jsx("input",{type:"radio",name:"review_report_reason",value:o.value,checked:t===o.value,onChange:()=>i(o.value)}),e.jsx("span",{style:{fontWeight:900},children:o.label})]},o.value))}),e.jsx("textarea",{value:l,onChange:o=>p(o.target.value),placeholder:"More details...",rows:4,style:{width:"100%",borderRadius:12,border:"1px solid rgba(229,231,235,.9)",padding:10,fontFamily:"inherit",marginTop:12}}),e.jsx("button",{type:"button",className:"btn danger",disabled:!m,onClick:async()=>{await(s==null?void 0:s({reason:t,details:l})),p(""),i("spam")},style:{justifyContent:"center",width:"100%",marginTop:12},children:a?"Submitting...":"Submit Report"})]})]})}):null}function C(){try{return typeof navigator<"u"&&typeof navigator.share=="function"}catch{return!1}}async function E(n){var s;const r=String(n||"");if(!r)return!1;try{if((s=navigator==null?void 0:navigator.clipboard)!=null&&s.writeText)return await navigator.clipboard.writeText(r),!0}catch{}try{const a=document.createElement("textarea");a.value=r,a.setAttribute("readonly","readonly"),a.style.position="fixed",a.style.top="-9999px",a.style.left="-9999px",document.body.appendChild(a),a.select();const t=document.execCommand("copy");return document.body.removeChild(a),t}catch{return!1}}async function B({title:n,text:r,url:s}){const a={title:n?String(n):void 0,text:r?String(r):void 0,url:s?String(s):void 0},t=a.url||"";if(C())try{return await navigator.share(a),{ok:!0,method:"share"}}catch(l){if(l&&typeof l=="object"&&"name"in l&&String(l.name)==="AbortError")return{ok:!0,method:"canceled"}}const i=await E(t||window.location.href);return{ok:i,method:i?"copy":"none"}}function T({baseUrl:n,businessId:r,isMobile:s}){try{const a=n?String(n):"",t=r?String(r):"",i=s?"local_hub_info_mobile.html":"local_hub_info.html",l=new URL(`${a}${i}`,window.location.href);return t&&l.searchParams.set("business_id",t),l.toString()}catch{return window.location.href}}const U=n=>{if(typeof n!="string")return[];const r=n.replace(/\r\n/g,`
`).split(`
`),s=[];let a=[];const t=()=>{a.length&&(s.push({type:"list",items:a}),a=[])};return r.forEach(i=>{const l=i.trim();if(!l){t();return}const p=l.match(/^#{1,3}\s+(.*)$/);if(p){t(),s.push({type:"heading",text:p[1].trim()});return}const m=l.match(/^([•\u2022]|â€¢|-|\*)\s+(.*)$/);if(m){a.push(m[2].trim());return}t(),s.push({type:"para",text:l})}),t(),s};export{$ as L,A as R,U as a,T as b,L as c,_ as d,F as e,B as s};
