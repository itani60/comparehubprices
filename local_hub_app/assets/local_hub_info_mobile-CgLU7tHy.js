import{r as c,j as s,a as Ss,b as gs,c as Bs,R as Hs}from"./localHub-Ddi82mor.js";import{b as W,s as V,a as $s,L as Ps,c as Fs,R as Us,d as Es,e as Os}from"./formatAbout-BRS1V-v7.js";import{g as G,t as K,a as L,l as N,b as zs,n as P,r as As,f as Ts,c as vs}from"./localHubInfoApi-DVAZkyw3.js";/* empty css                   */const Ds=[{value:"Newest",label:"Newest"},{value:"Highest",label:"Highest Rated"},{value:"Lowest",label:"Lowest Rated"},{value:"Helpful",label:"Most Helpful"}];function Ws({reviews:h,ratingSummary:o,onReport:k,onHelpful:v,onReportReview:F}){const[m,C]=c.useState("Newest"),[b,R]=c.useState(!1),[w,O]=c.useState(()=>new Map),y=c.useRef(null);c.useEffect(()=>{function n(u){y.current&&(y.current.contains(u.target)||R(!1))}return document.addEventListener("click",n),()=>document.removeEventListener("click",n)},[]);const f=c.useMemo(()=>Array.isArray(h)?h:[],[h]),_=c.useMemo(()=>{const n=[...f],u=r=>Number(r.helpful||0)+(w.get(r.id)||0);return m==="Highest"?n.sort((r,d)=>d.rating-r.rating||d.timestamp-r.timestamp):m==="Lowest"?n.sort((r,d)=>r.rating-d.rating||d.timestamp-r.timestamp):m==="Helpful"?n.sort((r,d)=>u(d)-u(r)||d.timestamp-r.timestamp):n.sort((r,d)=>d.timestamp-r.timestamp),n},[f,m,w]),S=(o&&typeof o.total=="number"?o.total:f.length)||1,B=o&&typeof o.avg=="number"?o.avg:f.reduce((n,u)=>n+(Number(u.rating)||0),0)/(f.length||1),z=c.useMemo(()=>{if(o&&o.counts)return o.counts;const n={1:0,2:0,3:0,4:0,5:0};return f.forEach(u=>{const r=Math.max(1,Math.min(5,Math.round(Number(u.rating)||0)));n[r]+=1}),n},[o,f]);return s.jsxs("section",{className:"collCard",children:[s.jsxs("div",{className:"collHead collHeadRow",children:[s.jsx("span",{children:"Reviews"}),s.jsxs("div",{className:"sort-box",ref:y,children:[s.jsxs("button",{type:"button",className:"custom-dropdown",onClick:n=>{n.stopPropagation(),R(u=>!u)},children:[s.jsx("i",{className:"fas fa-sort-amount-down"})," ",s.jsx("span",{children:m})]}),s.jsx("div",{className:`dropdown-menu ${b?"show":""}`,children:Ds.map(n=>s.jsx("div",{className:`dropdown-item ${n.value===m?"active":""}`,onClick:()=>{C(n.value),R(!1)},children:n.label},n.value))})]})]}),s.jsxs("div",{className:"rating-summary-card",children:[s.jsxs("div",{className:"summary-left",children:[s.jsx("div",{className:"big-num",children:B.toFixed(1)}),s.jsx("div",{className:"stars-sm",children:Array.from({length:5},(n,u)=>s.jsx("svg",{viewBox:"0 0 24 24",style:{fill:u<Math.round(B)?"#fbbf24":"#e2e8f0"},children:s.jsx("path",{d:"M12 17.3l-6.2 3.7 1.7-7L2 8.9l7.2-.6L12 2l2.8 6.3 7.2.6-5.5 5.1 1.7 7z"})},u))}),s.jsxs("div",{className:"total-cnt",children:[S," Reviews"]})]}),s.jsx("div",{className:"summary-bars",children:[5,4,3,2,1].map(n=>s.jsxs("div",{className:"bar-row",children:[s.jsx("span",{children:n}),s.jsx("div",{className:"bar-bg",children:s.jsx("div",{className:"bar-fill",style:{width:`${Math.round(z[n]/S*100)}%`}})})]},n))})]}),s.jsx("div",{className:"rev-container",children:_.length?_.map(n=>s.jsx("div",{className:"review-row",children:(()=>{const u=w.get(n.id)||0,r=Number(n.helpful||0)+u;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rev-header",children:[s.jsx("div",{className:"rev-avatar",children:n.avatarUrl?s.jsx("img",{src:n.avatarUrl,alt:"User"}):n.initials}),s.jsxs("div",{className:"rev-meta",children:[s.jsx("div",{className:"rev-name",children:n.name}),s.jsx("div",{className:"rev-date",children:n.dateLabel}),s.jsx("div",{className:"stars-sm",style:{margin:"2px 0"},children:Array.from({length:5},(d,j)=>s.jsx("svg",{viewBox:"0 0 24 24",style:{fill:j<n.rating?"#fbbf24":"#e2e8f0"},children:s.jsx("path",{d:"M12 17.3l-6.2 3.7 1.7-7L2 8.9l7.2-.6L12 2l2.8 6.3 7.2.6-5.5 5.1 1.7 7z"})},j))})]})]}),s.jsx("div",{className:"rev-body",children:n.text}),s.jsxs("div",{className:"rev-actions",children:[s.jsxs("button",{type:"button",className:"btn-link-action",onClick:async()=>{try{await(v==null?void 0:v(n.id)),O(d=>{const j=new Map(d);return j.set(n.id,(j.get(n.id)||0)+1),j})}catch{}},children:[s.jsx("i",{className:"far fa-thumbs-up"})," Helpful"," ",s.jsxs("span",{style:{opacity:.7},children:["(",r,")"]})]}),s.jsxs("button",{type:"button",className:"btn-link-action",onClick:()=>{F?F(n.id):k==null||k()},children:[s.jsx("i",{className:"far fa-flag"})," Report"]})]})]})})()},n.id)):s.jsx("div",{style:{padding:12,color:"var(--muted)",fontWeight:900},children:"No reviews yet."})})]})}function Vs(){return s.jsxs("div",{className:"lh-skeleton",children:[s.jsxs("section",{className:"hero",children:[s.jsx("div",{className:"cover",children:s.jsx("div",{className:"logoRing",children:s.jsx("div",{className:"sk sk-circle w-120 h-120"})})}),s.jsxs("div",{className:"heroBody",children:[s.jsx("div",{className:"sk sk-rect w-220 h-16"}),s.jsx("div",{style:{height:8}}),s.jsx("div",{className:"sk sk-rect w-full h-12"}),s.jsxs("div",{className:"stats-row",style:{marginTop:14},children:[s.jsx("div",{className:"sk sk-pill w-120 h-14"}),s.jsx("div",{className:"sk sk-pill w-120 h-14"}),s.jsx("div",{className:"sk sk-pill w-120 h-14"}),s.jsx("div",{className:"sk sk-pill w-120 h-14"})]}),s.jsxs("div",{className:"actions",style:{marginTop:14},children:[s.jsx("div",{className:"sk sk-btn w-full h-44"}),s.jsx("div",{className:"sk sk-btn w-full h-44"}),s.jsx("div",{className:"sk sk-btn w-full h-44"}),s.jsx("div",{className:"sk sk-btn w-full h-44"}),s.jsx("div",{className:"sk sk-btn w-full h-44"}),s.jsx("div",{className:"sk sk-btn w-full h-44"})]})]})]}),s.jsxs("section",{className:"card",children:[s.jsx("div",{className:"sk sk-rect w-180 h-14"}),s.jsx("div",{style:{height:12}}),s.jsx("div",{className:"sk sk-rect w-full h-12"}),s.jsx("div",{style:{height:10}}),s.jsx("div",{className:"sk sk-rect w-full h-12"}),s.jsx("div",{style:{height:10}}),s.jsx("div",{className:"sk sk-rect w-300 h-12"}),s.jsxs("div",{className:"social-flex",style:{marginTop:12},children:[s.jsx("div",{className:"sk sk-rect w-52 h-52"}),s.jsx("div",{className:"sk sk-rect w-52 h-52"}),s.jsx("div",{className:"sk sk-rect w-52 h-52"}),s.jsx("div",{className:"sk sk-rect w-52 h-52"}),s.jsx("div",{className:"sk sk-rect w-52 h-52"})]})]}),s.jsxs("section",{className:"collCard",children:[s.jsx("div",{className:"sk sk-rect w-180 h-14"}),s.jsx("div",{className:"prodGrid",style:{marginTop:12},children:Array.from({length:4},(h,o)=>s.jsxs("div",{className:"prodCard",children:[s.jsx("div",{className:"sk sk-rect w-full h-150"}),s.jsxs("div",{style:{padding:12,display:"grid",gap:10},children:[s.jsx("div",{className:"sk sk-rect w-180 h-12"}),s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[s.jsx("div",{className:"sk sk-pill w-140 h-36"}),s.jsx("div",{className:"sk sk-rect w-36 h-36"})]})]})]},o))})]}),s.jsxs("section",{className:"collCard",children:[s.jsx("div",{className:"sk sk-rect w-180 h-14"}),s.jsx("div",{style:{height:12}}),s.jsx("div",{className:"sk sk-rect w-full h-280"})]}),s.jsxs("section",{className:"collCard",children:[s.jsx("div",{className:"sk sk-rect w-180 h-14"}),s.jsx("div",{className:"rev-container",style:{marginTop:12},children:Array.from({length:2},(h,o)=>s.jsxs("div",{className:"review-row",children:[s.jsx("div",{className:"sk sk-circle w-44 h-44"}),s.jsxs("div",{style:{flex:1,display:"grid",gap:10},children:[s.jsxs("div",{style:{display:"flex",justifyContent:"space-between",gap:10},children:[s.jsx("div",{className:"sk sk-rect w-180 h-12"}),s.jsx("div",{className:"sk sk-rect w-120 h-10"})]}),s.jsx("div",{className:"sk sk-pill w-160 h-12"}),s.jsx("div",{className:"sk sk-rect w-full h-40"}),s.jsxs("div",{style:{display:"flex",gap:10,flexWrap:"wrap"},children:[s.jsx("div",{className:"sk sk-pill w-140 h-34"}),s.jsx("div",{className:"sk sk-pill w-140 h-34"})]})]})]},o))})]})]})}function Gs(){var Q,X,Y,Z,M,ss,es,as,ts,ns,is,ls,cs,rs,os,ds,us,hs,ms,xs,fs,bs;const[h,o]=c.useState(!0),[k,v]=c.useState(""),[F,m]=c.useState(null),[C,b]=c.useState(""),[R,w]=c.useState(!1),[O,y]=c.useState(!1),[f,_]=c.useState(!1),[S,B]=c.useState(""),[z,n]=c.useState(!1),[u,r]=c.useState(!1),[d,j]=c.useState([]),[Cs,A]=c.useState(0),[ws,T]=c.useState(null);function q(a,t=0){j(a),A(t),r(!0)}function H(a){try{return new URL(`../${a}`,window.location.href).toString()}catch{return`../${a}`}}function _s(){try{const a=new URL("local_hub_followers_mobile.html",window.location.href);return a.search=window.location.search,a.hash=window.location.hash,a.toString()}catch{return"local_hub_followers_mobile.html"}}c.useEffect(()=>{let a=null;if(C)return a=setTimeout(()=>b(""),4e3),()=>{a&&clearTimeout(a)}},[C]);async function I({signal:a}={}){const t=G();if(!t){m(null),o(!1);return}o(!0),v("");try{const i=await Ts({businessId:t,signal:a});let g=vs(i);if(!(i!=null&&i.viewer)&&L())try{const x=await N({action:"get_viewer_state",payload:{business_id:t},signal:a});x!=null&&x.viewer&&(g=vs({...i,viewer:x.viewer}))}catch{}m(g)}catch(i){if(a!=null&&a.aborted)return;m(null),v(i instanceof Error?i.message:"Failed to load business details.")}finally{if(a!=null&&a.aborted)return;o(!1)}}c.useEffect(()=>{const a=new AbortController;return I({signal:a.signal}),()=>a.abort()},[]),c.useEffect(()=>{const a=G();a&&Ss({businessId:a})},[]);const D=G();if(!D)return s.jsx("div",{className:"screen",children:s.jsxs("section",{className:"card",style:{borderColor:"#fecaca"},children:[s.jsx("div",{className:"cardHead",children:s.jsx("h2",{style:{color:"#b91c1c"},children:"Missing business_id"})}),s.jsx("div",{className:"cardBody",children:"Open this page with `?business_id=...`."})]})});const e=F,$=ws??((Q=e==null?void 0:e.viewer)==null?void 0:Q.isSaved),Is=((X=e==null?void 0:e.viewer)==null?void 0:X.actorType)==="business"&&((Y=e==null?void 0:e.viewer)==null?void 0:Y.actorId)&&(e==null?void 0:e.businessId)&&String(e.viewer.actorId)===String(e.businessId),J=h&&!e&&!k,Ls=(e==null?void 0:e.logoUrl)||"";return s.jsxs("div",{className:"screen",children:[C?s.jsx("div",{style:{marginBottom:10,fontWeight:900},children:C}):null,k?s.jsxs("section",{className:"card",style:{borderColor:"#fecaca"},children:[s.jsx("div",{className:"cardHead",children:s.jsx("h2",{style:{color:"#b91c1c"},children:"Failed to load business details"})}),s.jsx("div",{className:"cardBody",children:k})]}):null,J?s.jsx(Vs,{}):null,J?null:s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"hero",children:[s.jsx("div",{className:"cover",children:s.jsx("div",{className:"logoRing",children:s.jsx("img",{src:Ls,alt:"Logo"})})}),s.jsxs("div",{className:"heroBody",children:[s.jsx("div",{className:"titleRow",children:s.jsxs("div",{className:"nameBlock",children:[s.jsxs("h1",{className:"name",children:[s.jsx("span",{className:"bizNameText",children:(e==null?void 0:e.businessName)||(h?"Loading...":"Business")}),e!=null&&e.isVerified?s.jsxs("svg",{className:"verified-badge",width:"16",height:"16",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"Verified business",title:"Verified business",children:[s.jsx("rect",{width:"24",height:"24",fill:"#000000",opacity:"0"}),s.jsxs("g",{transform:"translate(12 12) scale(0.42)",children:[s.jsx("polygon",{points:"5.62,-21 9.05,-15.69 15.37,-15.38 15.69,-9.06 21,-5.63 18.12,0 21,5.62 15.69,9.05 15.38,15.37 9.06,15.69 5.63,21 0,18.12 -5.62,21 -9.05,15.69 -15.37,15.38 -15.69,9.06 -21,5.63 -18.12,0 -21,-5.62 -15.69,-9.05 -15.38,-15.37 -9.06,-15.69 -5.63,-21 0,-18.12",fill:"#42a5f5",fillRule:"nonzero"}),s.jsx("g",{transform:"translate(-0.01 0.51)",children:s.jsx("polygon",{points:"-2.6,6.74 -9.09,0.25 -6.97,-1.87 -2.56,2.53 7,-6.74 9.09,-4.59",fill:"#ffffff",fillRule:"nonzero"})})]})]}):null]}),s.jsxs("div",{className:"addr",children:[s.jsxs("svg",{className:"pin",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M12 21s7-4.35 7-11a7 7 0 1 0-14 0c0 6.65 7 11 7 11z"}),s.jsx("circle",{cx:"12",cy:"10",r:"2.5"})]}),(e==null?void 0:e.addressLine)||(h?"Loading...":"Address not provided")]})]})}),s.jsxs("div",{className:"stats-row",children:[s.jsxs("button",{type:"button",className:"stats-item stats-link",onClick:()=>{window.location.href=_s()},children:[s.jsx("span",{className:"stats-val",children:((Z=e==null?void 0:e.stats)==null?void 0:Z.followers)??0})," Followers"]}),s.jsxs("div",{className:"stats-item",children:[s.jsx("span",{className:"stats-val",children:((M=e==null?void 0:e.stats)==null?void 0:M.reviewCount)??0})," Reviews"]}),s.jsxs("div",{className:"stats-item",children:[s.jsx("span",{className:"stats-val",children:((ss=e==null?void 0:e.stats)==null?void 0:ss.likes)??0})," Likes"]}),s.jsxs("div",{className:"stats-item",children:[s.jsx("span",{className:"stats-val",children:(es=e==null?void 0:e.stats)!=null&&es.reviewCount?e.stats.averageRating.toFixed(1):"0.0"})," ","Rating"]})]}),Is?s.jsxs("div",{className:"actions owner-actions",children:[s.jsxs("button",{type:"button",className:"btn chat",onClick:()=>{window.location.href=H("business-chat-hub/index.html")},children:[s.jsx("i",{className:"fas fa-comment-dots"})," Chat"]}),s.jsxs("button",{type:"button",className:"btn profile",onClick:()=>{window.location.href=H("business_account_information.html")},children:[s.jsx("i",{className:"fas fa-user-circle"})," Profile"]}),s.jsxs("button",{type:"button",className:"btn analytics",onClick:()=>{window.location.href=H("business_analytics.html")},children:[s.jsx("i",{className:"fas fa-chart-line"})," Analytics"]}),s.jsxs("button",{type:"button",className:"btn alerts",onClick:()=>{window.location.href=H("business_communications.html")},children:[s.jsx("i",{className:"fas fa-bell"})," Alerts"]}),s.jsxs("button",{type:"button",className:"btn edit",onClick:()=>{window.location.href=H("business_post_management.html")},children:[s.jsx("i",{className:"fas fa-pen-to-square"})," Edit"]}),s.jsxs("button",{type:"button",className:"btn share",onClick:async()=>{const a=W({baseUrl:"/local_hub_app/",businessId:e==null?void 0:e.businessId,isMobile:!0}),t=await V({title:e!=null&&e.businessName?`${e.businessName} Ã¢â‚¬Â¢ LocalHub`:"LocalHub",text:e!=null&&e.businessName?`Check out ${e.businessName} on LocalHub.`:"Check this out on LocalHub.",url:a});(t.method==="copy"||t.method==="share")&&await K({businessId:e==null?void 0:e.businessId,method:t.method,url:a})},children:[s.jsx("i",{className:"fas fa-share-nodes"})," Share"]})]}):s.jsxs("div",{className:"actions",children:[s.jsxs("button",{type:"button",className:`btn follow${(as=e==null?void 0:e.viewer)!=null&&as.isFollowing?" following":""}`,disabled:!(e!=null&&e.businessId)||h,onClick:async()=>{var t;if(!(e!=null&&e.businessId))return;if(!L()){b("Please log in to continue.");return}try{const i=!((t=e==null?void 0:e.viewer)!=null&&t.isFollowing);await N({action:i?"follow_business":"unfollow_business",payload:{business_id:e.businessId}}),await I()}catch{}},children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),s.jsx("circle",{cx:"9",cy:"7",r:"4"}),s.jsx("path",{d:"M16 11l2 2 4-4"})]}),(ts=e==null?void 0:e.viewer)!=null&&ts.isFollowing?"Following":"Follow"]}),s.jsxs("a",{href:zs({recipientId:e==null?void 0:e.businessId,recipientName:e==null?void 0:e.businessName}),className:"btn chat",onClick:a=>{L()||(a.preventDefault(),b("Please log in to continue."))},children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M21 15a4 4 0 0 1-4 4H7l-4 3V7a4 4 0 0 1 4-4h10a4 4 0 0 1 4 4z"})}),"Chat"]}),s.jsxs("button",{type:"button",className:"btn rate",onClick:()=>{if(!L()){b("Please log in to continue.");return}w(!0)},children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M12 17.3l-6.2 3.7 1.7-7L2 8.9l7.2-.6L12 2l2.8 6.3 7.2.6-5.5 5.1 1.7 7z"})}),"Rate"]}),s.jsxs("button",{type:"button",className:"btn share",onClick:async()=>{const a=W({baseUrl:"/local_hub_app/",businessId:e==null?void 0:e.businessId,isMobile:!0}),t=await V({title:e!=null&&e.businessName?`${e.businessName} â€¢ LocalHub`:"LocalHub",text:e!=null&&e.businessName?`Check out ${e.businessName} on LocalHub.`:"Check this out on LocalHub.",url:a});(t.method==="copy"||t.method==="share")&&await K({businessId:e==null?void 0:e.businessId,method:t.method,url:a})},children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("circle",{cx:"18",cy:"5",r:"3"}),s.jsx("circle",{cx:"6",cy:"12",r:"3"}),s.jsx("circle",{cx:"18",cy:"19",r:"3"}),s.jsx("path",{d:"M8.6 13.5l6.8 3.9M15.4 6.6L8.6 10.5"})]}),"Share"]}),s.jsxs("button",{type:"button",className:`btn save${$?" saved":""}`,disabled:!(e!=null&&e.businessId)||h,onClick:async()=>{if(!(e!=null&&e.businessId))return;if(!L()){b("Please log in to continue.");return}try{const i=!!!$;T(i),await N({action:i?"save_business":"unsave_business",payload:{business_id:e.businessId}}),await I(),T(null)}catch{T(!!$)}},children:[s.jsx("svg",{viewBox:"0 0 24 24",fill:$?"currentColor":"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M6 3h12a2 2 0 0 1 2 2v16l-8-4-8 4V5a2 2 0 0 1 2-2z"})}),$?"Saved":"Save"]}),s.jsxs("button",{type:"button",className:"btn report",onClick:()=>{if(!L()){b("Please log in to continue.");return}y(!0)},children:[s.jsxs("svg",{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M4 22V4"}),s.jsx("path",{d:"M4 4h13l-1.5 4L17 12H4"})]}),"Report"]})]})]})]}),s.jsxs("section",{className:"card",children:[s.jsx("div",{className:"cardHead",children:s.jsxs("h2",{children:["About ",(e==null?void 0:e.businessName)||"Business"]})}),s.jsx("div",{className:"cardBody",children:h?"Loading...":(()=>{const a=$s((e==null?void 0:e.aboutText)||"");return a.length?s.jsx("div",{className:"aboutRich",children:a.map((t,i)=>t.type==="heading"?s.jsx("div",{className:"aboutHeading",children:t.text},`h-${i}`):t.type==="list"?s.jsx("ul",{className:"aboutList",children:t.items.map((g,x)=>s.jsx("li",{children:g},`li-${i}-${x}`))},`l-${i}`):s.jsx("p",{className:"aboutPara",children:t.text},`p-${i}`))}):"No description provided."})()}),s.jsxs("div",{style:{marginTop:10},children:[e!=null&&e.businessHours?s.jsxs("div",{className:"hours-block",children:[s.jsx("div",{className:"aboutHead",children:"Business Hours"}),s.jsx("div",{className:"hours-text",children:e.businessHours})]}):null,s.jsx("div",{style:{fontSize:13,fontWeight:1e3,marginBottom:10},children:"Connect with us"}),s.jsxs("div",{className:"social-flex",style:{padding:0,gap:10},children:[e!=null&&e.businessNumber?s.jsx("a",{href:`tel:${String(e.businessNumber).replace(/[^\d+]/g,"")}`,className:"social-item phone",children:s.jsx("i",{className:"fas fa-phone"})}):null,s.jsx("a",{href:P("facebook",(ns=e==null?void 0:e.social)==null?void 0:ns.facebook),className:"social-item fb",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.facebook||a.preventDefault()},style:{display:(is=e==null?void 0:e.social)!=null&&is.facebook?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fab fa-facebook-f"})}),s.jsx("a",{href:P("twitter",(ls=e==null?void 0:e.social)==null?void 0:ls.twitter),className:"social-item tw",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.twitter||a.preventDefault()},style:{display:(cs=e==null?void 0:e.social)!=null&&cs.twitter?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fa-brands fa-x-twitter"})}),s.jsx("a",{href:P("whatsapp",(rs=e==null?void 0:e.social)==null?void 0:rs.whatsapp),className:"social-item wa",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.whatsapp||a.preventDefault()},style:{display:(os=e==null?void 0:e.social)!=null&&os.whatsapp?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fab fa-whatsapp"})}),s.jsx("a",{href:P("tiktok",(ds=e==null?void 0:e.social)==null?void 0:ds.tiktok),className:"social-item tt",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.tiktok||a.preventDefault()},style:{display:(us=e==null?void 0:e.social)!=null&&us.tiktok?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fab fa-tiktok"})}),s.jsx("a",{href:P("instagram",(hs=e==null?void 0:e.social)==null?void 0:hs.instagram),className:"social-item ig",onClick:a=>{var t;(t=e==null?void 0:e.social)!=null&&t.instagram||a.preventDefault()},style:{display:(ms=e==null?void 0:e.social)!=null&&ms.instagram?"":"none"},target:"_blank",rel:"noopener",children:s.jsx("i",{className:"fab fa-instagram"})})]})]})]}),s.jsxs("section",{className:"collCard",children:[s.jsx("div",{style:{fontSize:13,fontWeight:1e3,marginBottom:10},children:"Our Gallery"}),s.jsx("div",{className:"prodGrid",children:((e==null?void 0:e.products)||[]).map(a=>s.jsxs("div",{className:"prodCard",role:"group",children:[s.jsx("div",{className:"prodImg",style:{cursor:"zoom-in"},onClick:()=>{gs({businessId:(e==null?void 0:e.businessId)||D,productKey:a.title||"Product"}),q(a.images,0)},role:"button",tabIndex:0,onKeyDown:t=>{(t.key==="Enter"||t.key===" ")&&(gs({businessId:(e==null?void 0:e.businessId)||D,productKey:a.title||"Product"}),q(a.images,0))},children:s.jsx("img",{src:a.cover,alt:a.title})}),s.jsxs("div",{className:"prodInfo",children:[s.jsx("div",{className:"prodName",children:a.title}),s.jsx("div",{className:"product-meta-row",children:s.jsx("div",{className:"product-actions",children:(()=>{var Ns,ks,ys;const t=a.title||"Product",i=((Ns=e==null?void 0:e.productReactions)==null?void 0:Ns[t])||{},g=Number(i==null?void 0:i.total)||0,x=i!=null&&i.by_reaction&&typeof i.by_reaction=="object"?i.by_reaction:{},U=((ys=(ks=e==null?void 0:e.viewer)==null?void 0:ks.productReactions)==null?void 0:ys[t])||"",js=["ðŸ‘","â¤ï¸","ðŸ”¥"],Rs=js.map(l=>({reaction:l,count:Number((x==null?void 0:x[l])??0)||0})).filter(l=>l.count>0).sort((l,p)=>p.count-l.count).slice(0,3).map(l=>l.reaction),ps=g>0;return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"reaction-container",children:[s.jsx("div",{className:"reactions-popover small-popover",children:js.map(l=>s.jsx("span",{className:`emoji ${U===l?"active":""}`,onClick:async p=>{p.preventDefault(),p.stopPropagation();try{await N({action:"react_product",payload:{business_id:e==null?void 0:e.businessId,product_key:t,reaction:l,force_set:!0}}),await I()}catch{}},title:l,"aria-label":`React ${l}`,children:l},l))}),s.jsxs("div",{className:"btn-with-count",children:[s.jsx("button",{type:"button",className:"small-btn",onClick:async l=>{l.preventDefault(),l.stopPropagation();try{await N({action:"react_product",payload:{business_id:e==null?void 0:e.businessId,product_key:t,reaction:U||"â¤ï¸",force_set:!1}}),await I()}catch{}},"aria-label":"React",children:U?s.jsx("span",{className:"my-reaction-emoji",children:U}):s.jsx("i",{className:"far fa-heart"})}),ps?s.jsx("div",{className:"emoji-stack",children:Rs.map(l=>s.jsx("span",{children:l},l))}):null,ps?s.jsx("span",{className:"reaction-count",children:g}):null]})]}),s.jsx("button",{type:"button",className:"small-btn",title:"Share",onClick:l=>{l.preventDefault(),l.stopPropagation(),(async()=>{const p=W({baseUrl:"/local_hub_app/",businessId:e==null?void 0:e.businessId,isMobile:!0}),E=await V({title:e!=null&&e.businessName?`${e.businessName} â€¢ LocalHub`:"LocalHub",text:a!=null&&a.title?`Check out "${a.title}" on LocalHub.`:"Check this out on LocalHub.",url:p});(E.method==="copy"||E.method==="share")&&await K({businessId:e==null?void 0:e.businessId,method:E.method,url:p})})()},children:s.jsx("i",{className:"fas fa-share-nodes"})})]})})()})})]})]},a.title))})]}),s.jsx(Ps,{address:(e==null?void 0:e.addressLine)||""}),s.jsx(Ws,{reviews:(e==null?void 0:e.reviews)||[],ratingSummary:{total:((xs=e==null?void 0:e.stats)==null?void 0:xs.reviewCount)??0,avg:((fs=e==null?void 0:e.stats)==null?void 0:fs.averageRating)??0,counts:((bs=e==null?void 0:e.stats)==null?void 0:bs.ratingBreakdown)||null},onReport:()=>y(!0),onHelpful:async a=>{await N({action:"set_review_helpful",payload:{review_id:a,helpful:!0}})},onReportReview:a=>{B(String(a||"")),_(!0)}})]}),s.jsx(Fs,{open:u,slides:d,index:Cs,onPrev:()=>A(a=>(a-1+d.length)%d.length),onNext:()=>A(a=>(a+1)%d.length),onClose:()=>r(!1)}),s.jsx(Us,{open:f,onClose:()=>_(!1),busy:z,onSubmit:async({reason:a,details:t})=>{if(S){n(!0);try{await N({action:"report_review",payload:{review_id:S,reason:a||"other",details:t||""}}),_(!1),B("")}catch{}finally{n(!1)}}}}),s.jsx(Es,{open:O,onClose:()=>y(!1),businessId:(e==null?void 0:e.businessId)||"",onSubmit:async({businessId:a,reason:t,details:i})=>{await As({businessId:a,reason:t,details:i})}}),s.jsx(Os,{open:R,onClose:()=>w(!1),businessId:(e==null?void 0:e.businessId)||"",onSubmit:async({businessId:a,rating:t,content:i})=>{await N({action:"upsert_review",payload:{business_id:a,rating:t,content:i}}),await I()}})]})}Bs.createRoot(document.getElementById("root")).render(s.jsx(Hs.StrictMode,{children:s.jsx(Gs,{})}));
