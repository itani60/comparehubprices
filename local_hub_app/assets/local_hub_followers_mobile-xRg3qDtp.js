import{r,j as e,c as B,R}from"./localHub-Ddi82mor.js";import{g as A,d as E}from"./localHubInfoApi-CBjg4cZN.js";/* empty css                   */function L(l){var m,d;const a=String(l||"").trim().split(/\s+/).filter(Boolean);if(!a.length)return"U";const n=((m=a[0])==null?void 0:m[0])||"",c=a.length>1&&((d=a[a.length-1])==null?void 0:d[0])||"";return(n+c).toUpperCase()||"U"}function k(){try{const l=new URL("local_hub_info_mobile.html",window.location.href);return l.search=window.location.search,l.hash=window.location.hash,l.toString()}catch{return"local_hub_info_mobile.html"}}function T(l){if(!l)return"Not set";const a=new Date(l);return Number.isNaN(a.getTime())?"Not set":a.toLocaleDateString(void 0,{year:"numeric",month:"short"})}function V(l){const a=String((l==null?void 0:l.suburb)||"").trim(),n=String((l==null?void 0:l.village)||"").trim();return a?{label:"Suburb",value:a}:n?{label:"Village",value:n}:{label:"Suburb/Village",value:"Not set"}}function U(){const l=A(),[a,n]=r.useState([]),[c,m]=r.useState(""),[d,F]=r.useState(0),[M,x]=r.useState(0),[j,w]=r.useState(!0),[v,g]=r.useState(!1),[b,p]=r.useState(""),[o,h]=r.useState(null),C=24,_=a.length<d,y=r.useMemo(()=>{const s=c.trim().toLowerCase();return s?a.filter(t=>{const i=String(t.name||"").toLowerCase(),f=String(t.type||"").toLowerCase();return i.includes(s)||f.includes(s)}):a},[a,c]),u=r.useMemo(()=>l?j?"Loading followers...":a.length?"":"No followers yet.":"Missing business_id.",[l,j,a.length]);async function S({append:s}={}){if(l){s?g(!0):w(!0),p("");try{const t=await E({businessId:l,limit:C,offset:s?M:0}),i=Array.isArray(t==null?void 0:t.followers)?t.followers:[],f=Number(t==null?void 0:t.total)||0;s?(n(N=>[...N,...i]),x(N=>N+i.length)):(n(i),x(i.length)),F(f)}catch(t){p(t instanceof Error?t.message:"Failed to load followers.")}finally{w(!1),g(!1)}}}return r.useEffect(()=>{S({append:!1})},[l]),e.jsxs("div",{className:"screen",children:[e.jsxs("section",{className:"card followersCard",children:[e.jsxs("div",{className:"followersHeader",children:[e.jsxs("button",{className:"followersBack",type:"button",onClick:()=>window.location.href=k(),children:[e.jsx("i",{className:"fas fa-arrow-left"})," Back"]}),e.jsx("div",{className:"followersTitle",children:"Followers"}),e.jsx("div",{className:"followersCount",children:d})]}),e.jsxs("div",{className:"followersSearch",children:[e.jsx("i",{className:"fas fa-search"}),e.jsx("input",{type:"search",placeholder:"Search followers...",value:c,onChange:s=>m(s.target.value),"aria-label":"Search followers"})]}),b?e.jsx("div",{className:"followersError",children:b}):null,u?e.jsx("div",{className:"followersEmpty",children:u}):null,u?null:e.jsx("div",{className:"followersList",children:y.map(s=>e.jsxs("div",{className:"followerRow",children:[e.jsx("button",{type:"button",className:"followerAvatar",onClick:()=>h(s),"aria-label":`View ${s.name||"follower"} details`,children:s.avatar_url?e.jsx("img",{src:s.avatar_url,alt:s.name||"Follower"}):L(s.name)}),e.jsxs("div",{className:"followerInfo",children:[e.jsx("div",{className:"followerName",children:s.name||"Follower"}),e.jsx("div",{className:"followerMeta",children:e.jsx("span",{className:"followerBadge",children:s.type==="business"?"Business":"Standard"})})]})]},`${s.type}-${s.id}`))}),!u&&!y.length?e.jsx("div",{className:"followersEmpty",children:"No matches found."}):null,_?e.jsx("button",{type:"button",className:"followersLoad",onClick:()=>S({append:!0}),disabled:v,children:v?"Loading...":"Load more"}):null]}),o?e.jsx("div",{className:"followersModalOverlay",onClick:()=>h(null),children:e.jsxs("div",{className:"followersModal",onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{className:"followersModalHeader",children:[e.jsx("div",{className:"followersModalTitle",children:"Follower Details"}),e.jsx("button",{className:"followersModalClose",type:"button",onClick:()=>h(null),children:e.jsx("i",{className:"fas fa-times"})})]}),e.jsxs("div",{className:"followersModalBody",children:[e.jsx("div",{className:"modalAvatar",children:o.avatar_url?e.jsx("img",{src:o.avatar_url,alt:o.name||"Follower"}):L(o.name)}),e.jsx("div",{className:"modalName",children:o.name||"Follower"}),e.jsx("div",{className:"modalType",children:o.type==="business"?"Business Account":"Standard Account"}),e.jsxs("div",{className:"modalGrid",children:[(()=>{const s=V(o);return e.jsxs("div",{className:"modalRow",children:[e.jsx("span",{className:"modalLabel",children:s.label}),e.jsx("span",{className:"modalValue",children:s.value})]})})(),e.jsxs("div",{className:"modalRow",children:[e.jsx("span",{className:"modalLabel",children:"Province"}),e.jsx("span",{className:"modalValue",children:o.province||"Not set"})]}),e.jsxs("div",{className:"modalRow",children:[e.jsx("span",{className:"modalLabel",children:"Town"}),e.jsx("span",{className:"modalValue",children:o.town||"Not set"})]}),e.jsxs("div",{className:"modalRow",children:[e.jsx("span",{className:"modalLabel",children:"Account Since"}),e.jsx("span",{className:"modalValue",children:T(o.account_since)})]})]})]})]})}):null]})}B.createRoot(document.getElementById("root")).render(e.jsx(R.StrictMode,{children:e.jsx(U,{})}));
