import{r as s,j as r,s as J,t as ne,f as Me,c as ke,R as Le}from"./localHub-DHLivfa6.js";function Te({slides:e}){const[a,l]=s.useState(0),m=s.useMemo(()=>Array.isArray(e)?e:[],[e]),u=s.useRef(null);if(m.length===0)return null;const f=m.length,w=100/f;return s.useEffect(()=>{l(0)},[f]),s.useEffect(()=>{if(f<=1)return;function p(){u.current||(u.current=setInterval(()=>{l(v=>(v+1)%f)},1e4))}function c(){u.current&&(clearInterval(u.current),u.current=null)}return p(),()=>c()},[f]),r.jsxs("div",{className:"carousel",onMouseEnter:()=>{u.current&&(clearInterval(u.current),u.current=null)},onMouseLeave:()=>{f<=1||u.current||(u.current=setInterval(()=>{l(p=>(p+1)%f)},1e4))},children:[r.jsx("div",{className:"carousel-inner",style:{width:`${f*100}%`,transform:`translateX(-${a*w}%)`},children:m.map((p,c)=>r.jsx("div",{className:"carousel-slide",style:{width:`${w}%`,flex:`0 0 ${w}%`},children:r.jsx("img",{src:p.url,alt:p.alt,onError:v=>{var M;v.currentTarget.onerror=null;const y=p&&typeof p.fallbackUrl=="string"?p.fallbackUrl:((M=m[0])==null?void 0:M.url)||"";v.currentTarget.src=y}})},`${p.url}-${c}`))}),r.jsx("div",{className:"carousel-dots",children:m.map((p,c)=>r.jsx("span",{className:`dot ${c===a?"active":""}`,onClick:()=>l(c)},c))})]})}const me="lh_profile_impressions_v1";let E;function ge(){if(E||(E=new Set,typeof window>"u"))return E;try{const e=window.sessionStorage.getItem(me),a=e?JSON.parse(e):[];Array.isArray(a)&&a.forEach(l=>{typeof l=="string"&&l.trim().length&&E.add(l)})}catch{}return E}function le(e){return e?ge().has(String(e)):!1}function se(e){if(!e)return;const a=ge(),l=String(e);if(!a.has(l)&&(a.add(l),!(typeof window>"u")))try{window.sessionStorage.setItem(me,JSON.stringify(Array.from(a)))}catch{}}function _e(e){const a=Number(e);if(!Number.isFinite(a)||a<=0)return null;const l=Math.max(1,Math.min(5,Math.round(a))),m=5-l;return[...Array.from({length:l},(u,f)=>r.jsx("i",{className:"fa-solid fa-star"},`filled-${f}`)),...Array.from({length:m},(u,f)=>r.jsx("i",{className:"fa-regular fa-star"},`empty-${f}`))]}function Ee({business:e}){const a=(e==null?void 0:e.name)||"Business",l=Number(e.rating),m=Number.isFinite(l)&&l>0,u=(e==null?void 0:e.businessType)||(e==null?void 0:e.category)||"Services",f=!!(e!=null&&e.isVerified||e!=null&&e.verified||e!=null&&e.is_verified),w="/local_hub_app/images/verified-badge.svg",p=s.useRef(null),c=s.useRef(null),v=s.useMemo(()=>`https://ui-avatars.com/api/?name=${encodeURIComponent(a)}&background=random&color=fff`,[a]),y=s.useMemo(()=>{const d=typeof e.logo=="string"?e.logo.trim():"";return d.length?d:v},[v,e.logo]),M=s.useMemo(()=>{const d=J({title:a,subtitle:"No product image"}),N=J({title:a,subtitle:"Image unavailable"}),h=Array.isArray(e.images)?e.images.filter(x=>typeof x=="string"&&x.trim().length>0):typeof e.image=="string"&&e.image.trim().length>0?[e.image.trim()]:[],S=Array.from(new Set(h)),i=[];for(let x=0;x<Math.min(4,S.length);x++)i.push(S[x]);for(;i.length<4;)i.push(d);return i.map((x,L)=>({url:x,alt:`${a} product image`,fallbackUrl:N,isPlaceholder:x===d}))},[e.image,e.images,a]);return s.useEffect(()=>{if(!(e!=null&&e.id)||le(e.id)||typeof window>"u")return;const d=p.current;if(!d)return;if(!("IntersectionObserver"in window)){se(e.id),ne({businessId:e.id});return}let N=!1;const h=new IntersectionObserver(S=>{const i=S[0];if(!i||N)return;i.isIntersecting&&i.intersectionRatio>=.5?c.current==null&&(c.current=window.setTimeout(()=>{if(c.current=null,N||le(e.id))return;const L=d.getBoundingClientRect(),A=Math.min(L.bottom,window.innerHeight)-Math.max(L.top,0);(L.height>0?A/L.height:0)<.5||(se(e.id),ne({businessId:e.id}),h.disconnect())},1e3)):c.current!=null&&(clearTimeout(c.current),c.current=null)},{threshold:[0,.5,1]});return h.observe(d),()=>{N=!0,c.current!=null&&(clearTimeout(c.current),c.current=null),h.disconnect()}},[e==null?void 0:e.id]),r.jsxs("div",{className:"card",ref:p,children:[r.jsxs("div",{className:"biz-header",children:[r.jsx("img",{src:y,alt:`${a} logo`,className:"biz-avatar",onError:d=>{d.currentTarget.onerror=null,d.currentTarget.src=v}}),r.jsx("div",{children:r.jsxs("div",{className:"biz-name",children:[a,f?r.jsx("img",{src:w,alt:"Verified",className:"verified-badge",title:"Verified business","aria-label":"Verified business"}):null]})})]}),r.jsx(Te,{slides:M}),r.jsxs("div",{className:"biz-address",children:[r.jsx("i",{className:"fa-solid fa-location-dot",style:{alignSelf:"flex-start",marginTop:3}}),r.jsxs("div",{children:[r.jsx("div",{style:{fontWeight:600},children:e.address||"123 Main Street"}),r.jsxs("div",{style:{fontSize:"0.8em",opacity:.8},children:[e.suburb||"Central",", ",e.city||"Johannesburg"]}),r.jsx("div",{style:{fontSize:"0.8em",opacity:.8},children:e.province||"Gauteng"})]})]}),r.jsx("div",{className:"biz-rating",style:{marginTop:8},children:m?r.jsxs(r.Fragment,{children:[_e(l)," ",r.jsxs("span",{children:["(",l.toFixed(1),")"]})]}):r.jsx("span",{className:"no-rating",children:"No ratings yet"})}),r.jsx("div",{className:"badge",style:{marginTop:6},children:u}),r.jsx("a",{href:`/local_hub_app/local_hub_info.html?business_id=${encodeURIComponent(e.id||"")}`,className:"view-details-btn",onClick:d=>{var h,S;(S=(h=window.matchMedia)==null?void 0:h.call(window,"(max-width: 640px)"))!=null&&S.matches&&(d.preventDefault(),window.location.href=`/local_hub_app/local_hub_info_mobile.html?business_id=${encodeURIComponent(e.id||"")}`)},children:r.jsx("span",{children:"View Details"})})]})}function oe(e){return typeof e=="string"?{value:e,label:e}:e}function R({id:e,label:a,value:l,items:m,allOption:u,onChange:f,containerClassName:w="filter-box",labelClassName:p="filter-label",disabled:c=!1}){const v=s.useRef(null),[y,M]=s.useState(!1),d=s.useMemo(()=>(m||[]).map(oe),[m]),N=s.useMemo(()=>oe(u),[u]),h=s.useMemo(()=>{const i=d.find(x=>x.value===l);return(i==null?void 0:i.label)??N.label},[N.label,d,l]);s.useEffect(()=>{c&&M(!1)},[c]),s.useEffect(()=>{function i(x){v.current&&(v.current.contains(x.target)||M(!1))}return document.addEventListener("click",i),()=>document.removeEventListener("click",i)},[]);function S(i){f(i),M(!1)}return r.jsxs("div",{className:w,style:{zIndex:y?3:1},children:[a?r.jsx("label",{className:p,htmlFor:e,children:a}):null,r.jsxs("div",{className:`custom-dropdown ${y?"active":""}`,ref:v,children:[r.jsxs("button",{id:e,type:"button",className:"custom-dropdown-btn","aria-haspopup":"listbox","aria-expanded":y,disabled:c,onClick:i=>{i.stopPropagation(),!c&&M(x=>!x)},children:[r.jsx("span",{children:h}),r.jsx("i",{className:"fas fa-chevron-down"})]}),r.jsx("div",{className:"custom-dropdown-menu",role:"listbox","aria-label":a,children:r.jsxs("div",{className:"custom-dropdown-items",children:[r.jsx("div",{className:`custom-dropdown-item ${l===N.value?"selected":""}`,role:"option","aria-selected":l===N.value,onClick:()=>S(N.value),children:N.label}),d.map(i=>r.jsx("div",{className:`custom-dropdown-item ${l===i.value?"selected":""}`,role:"option","aria-selected":l===i.value,onClick:()=>S(i.value),children:i.label},i.value))]})})]})]})}const ce={limpopo:["Tzaneen","Louis Trichardt","Polokwane","Lephalale","Mokopane","Modimolle","Musina","Phalaborwa","Bela-Bela","Thohoyandou","Thabazimbi","Giyani","Lebowakgomo","Seshego","Burgersfort","Malamulele","Vuwani","Sibasa","Mphephu"],gauteng:["Johannesburg","Vereeniging","Heidelberg","Pretoria","Krugersdorp","Centurion","Thokoza","Randfontein","Carletonville","Alberton","Vanderbijlpark","Soweto","Springs","Thembisa","Boksburg","Randburg","Benoni","Bophelong","Alexandra","Mamelodi","Tsakani","Duduza","Refilwe","Vosloorus","Wattville","Sebokeng","Hammanskraal","Evaton","Khutsong","Katlehong","Kagiso","Zithobeni","Reiger Park","Midrand","Sharpeville","Muldersdrift","Roodepoort","Meyerton"],"western-cape":["Cape Town","Stellenbosch","Paarl","Franschhoek","George","Mossel Bay","Knysna","Hermanus","Worcester","Somerset West","Bellville","Claremont"],"kwazulu-natal":["Durban","Pietermaritzburg","Umhlanga","Pinetown","Richards Bay","Newcastle","Ladysmith","Empangeni","Ballito","Margate"],"eastern-cape":["Gqeberha","Port Elizabeth","East London","Mthatha","Grahamstown","King William's Town","Jeffreys Bay","Uitenhage"],mpumalanga:["Mbombela","Nelspruit","Witbank","eMalahleni","Middelburg","Secunda","White River","Hazyview"],"north-west":["Mahikeng","Rustenburg","Klerksdorp","Potchefstroom","Brits","Zeerust","Lichtenburg"],"free-state":["Bloemfontein","Welkom","Sasolburg","Bethlehem","Kroonstad","Parys","Harrismith"],"northern-cape":["Kimberley","Upington","Springbok","Kuruman","De Aar","Port Nolloth"]},G=12,fe="lh_user_location_v1",ie=[{value:"all",label:"All Categories"},{value:"service",label:"Service"},{value:"beauty",label:"Beauty & Wellness"},{value:"health",label:"Health Care"},{value:"retail",label:"Retail"}],ue=[{value:"relevance",label:"Relevance"},{value:"rating",label:"Highest Rated"},{value:"popular",label:"Most Popular"},{value:"newest",label:"Newest"},{value:"distance",label:"Distance"}];function T(e){return String(e||"").trim().toLowerCase().replace(/&/g,"and").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"")}function D(e){return String(e||"").split("-").filter(Boolean).map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ")}function de(e){const a=`; ${document.cookie||""}`.split(`; ${e}=`);return a.length!==2?"":a.pop().split(";").shift()||""}function Ie(){return!!(de("standard_session_id")||de("business_session_id"))}function Re(){try{const e=sessionStorage.getItem(fe);if(!e)return null;const a=JSON.parse(e);if(!a||typeof a!="object")return null;const l=typeof a.province=="string"?a.province.trim():"",m=typeof a.provinceSlug=="string"?a.provinceSlug.trim():"",u=typeof a.suburb=="string"?a.suburb.trim():"";if(!u||!l&&!m)return null;const f=typeof a.placeType=="string"?a.placeType.trim():"suburb";return{province:l||m,suburb:u,placeType:f||"suburb"}}catch{return null}}function Ae(e){const a=[],l=m=>{if(m){if(Array.isArray(m)){m.forEach(l);return}if(typeof m=="string"){const u=T(m);u&&a.push(u)}}};return l(e==null?void 0:e.category),l(e==null?void 0:e.businessCategory),l(e==null?void 0:e.categories),l(e==null?void 0:e.categoryTags),l(e==null?void 0:e.businessCategories),l(e==null?void 0:e.businessType),Array.from(new Set(a))}function Pe(e){var m,u,f,w,p,c,v;const a=Number((e==null?void 0:e.latitude)??(e==null?void 0:e.lat)??((m=e==null?void 0:e.location)==null?void 0:m.lat)??((u=e==null?void 0:e.coordinates)==null?void 0:u.lat)??((f=e==null?void 0:e.coordinates)==null?void 0:f.latitude)),l=Number((e==null?void 0:e.longitude)??(e==null?void 0:e.lng)??((w=e==null?void 0:e.location)==null?void 0:w.lng)??((p=e==null?void 0:e.location)==null?void 0:p.lon)??((c=e==null?void 0:e.coordinates)==null?void 0:c.lng)??((v=e==null?void 0:e.coordinates)==null?void 0:v.longitude));return!Number.isFinite(a)||!Number.isFinite(l)?null:{lat:a,lng:l}}function $e(e,a){const l=c=>c*Math.PI/180,m=l(a.lat-e.lat),u=l(a.lng-e.lng),f=l(e.lat),w=l(a.lat),p=Math.sin(m/2)**2+Math.cos(f)*Math.cos(w)*Math.sin(u/2)**2;return 2*6371*Math.asin(Math.sqrt(p))}function Be(){const[e,a]=s.useState([]),[l,m]=s.useState(!0),[u,f]=s.useState(""),[w,p]=s.useState(!1),[c,v]=s.useState(""),[y,M]=s.useState("all"),[d,N]=s.useState("all"),[h,S]=s.useState("all"),[i,x]=s.useState("relevance"),[L,A]=s.useState(G),[P,q]=s.useState(null),[Y,he]=s.useState(!1),[pe,_]=s.useState(!1),U=s.useRef(null),[H,Z]=s.useState(!1),[X,Q]=s.useState(""),[b,z]=s.useState(""),[I,K]=s.useState("suburb"),[ve,$]=s.useState(!1);s.useEffect(()=>{const t=new AbortController;return m(!0),f(""),Me({limit:200,offset:0,signal:t.signal}).then(n=>{a(Array.isArray(n)?n:[])}).catch(n=>{t.signal.aborted||f(n instanceof Error?n.message:"Failed to load businesses.")}).finally(()=>{t.signal.aborted||m(!1)}),()=>t.abort()},[]),s.useEffect(()=>{const t=Re();t&&(Q(t.province),z(t.suburb),K(t.placeType||"suburb")),!t&&!Ie()&&Z(!0)},[]),s.useEffect(()=>(H?document.body.classList.add("modal-open"):document.body.classList.remove("modal-open"),()=>document.body.classList.remove("modal-open")),[H]),s.useEffect(()=>{function t(n){U.current&&(U.current.contains(n.target)||_(!1))}return document.addEventListener("click",t),()=>document.removeEventListener("click",t)},[]),s.useEffect(()=>{A(G)},[c,y,d,h,i]),s.useEffect(()=>{i!=="distance"||Y||(he(!0),navigator.geolocation&&navigator.geolocation.getCurrentPosition(t=>{q({lat:t.coords.latitude,lng:t.coords.longitude})},()=>{q(null)},{enableHighAccuracy:!1,timeout:6e3,maximumAge:3e5}))},[i,Y]);const ee=s.useMemo(()=>Object.keys(ce).sort().map(t=>({value:t,label:D(t)})),[]),B=d==="all",W=s.useMemo(()=>B?[]:(ce[d]||[]).slice().sort(),[B,d]),O=s.useMemo(()=>{let t=e.slice();if(y!=="all"){const o={service:["service"],beauty:["beauty","wellness","salon","spa"],health:["health","medical","clinic","pharmacy"],retail:["retail","store","shop","market"]}[y]||[y];t=t.filter(g=>{const j=Ae(g);if(j.length)return j.includes(y);const C=T((g==null?void 0:g.businessType)||(g==null?void 0:g.category));return o.some(k=>C.includes(k)||C===k)})}return d!=="all"&&(t=t.filter(n=>T(n==null?void 0:n.province)===d)),h!=="all"&&(t=t.filter(n=>{const o=T(n==null?void 0:n.city),g=T(n==null?void 0:n.suburb);return o===h||g===h})),t},[e,y,h,d]),V=s.useMemo(()=>{let t=O.slice();const n=c.trim().toLowerCase();if(n&&(t=t.filter(o=>{const g=String((o==null?void 0:o.name)||"").toLowerCase(),j=String((o==null?void 0:o.businessType)||(o==null?void 0:o.category)||"").toLowerCase(),C=String((o==null?void 0:o.city)||"").toLowerCase(),k=String((o==null?void 0:o.suburb)||"").toLowerCase(),F=String((o==null?void 0:o.address)||"").toLowerCase();return g.includes(n)||j.includes(n)||C.includes(n)||k.includes(n)||F.includes(n)})),i==="rating")t.sort((o,g)=>(Number(g==null?void 0:g.rating)||0)-(Number(o==null?void 0:o.rating)||0));else if(i==="popular")t.sort((o,g)=>(Number(g==null?void 0:g.followers)||0)-(Number(o==null?void 0:o.followers)||0));else if(i==="newest")t.sort((o,g)=>{const j=new Date((o==null?void 0:o.createdAt)||0).getTime();return new Date((g==null?void 0:g.createdAt)||0).getTime()-j});else if(i==="distance"&&P){const o=t.map(j=>{const C=Pe(j),k=C?$e(P,C):Number.POSITIVE_INFINITY;return{...j,_distance:k}});o.some(j=>Number.isFinite(j._distance)&&j._distance<Number.POSITIVE_INFINITY)&&(t=o.sort((j,C)=>j._distance-C._distance).map(j=>{const{_distance:C,...k}=j;return k}))}return t},[O,c,i,P]),ye=s.useMemo(()=>V.slice(0,L),[V,L]),xe=L<V.length,te=s.useMemo(()=>{const t=c.trim().toLowerCase();return t?O.filter(n=>{const o=String((n==null?void 0:n.name)||"").toLowerCase(),g=String((n==null?void 0:n.businessType)||(n==null?void 0:n.category)||"").toLowerCase(),j=String((n==null?void 0:n.city)||"").toLowerCase(),C=String((n==null?void 0:n.suburb)||"").toLowerCase();return o.includes(t)||g.includes(t)||j.includes(t)||C.includes(t)}).slice(0,6):[]},[O,c]),re=pe&&c.trim().length>0,je=!!(c.trim()||y!=="all"||d!=="all"||h!=="all"||i!=="relevance"),ae=s.useMemo(()=>{const t=[],n=h!=="all"?W.find(o=>T(o)===h)||D(h):"";if(c.trim()&&t.push({label:`Search: "${c.trim()}"`,onClear:()=>v("")}),y!=="all"){const o={service:"Service",beauty:"Beauty & Wellness",health:"Health Care",retail:"Retail"};t.push({label:o[y]||y,onClear:()=>M("all")})}if(d!=="all"&&t.push({label:D(d),onClear:()=>{N("all"),S("all")}}),h!=="all"&&t.push({label:n||h,onClear:()=>S("all")}),i!=="relevance"){const o={rating:"Highest Rated",popular:"Most Popular",newest:"Newest",distance:"Distance"};t.push({label:o[i]||i,onClear:()=>x("relevance")})}return t},[y,h,W,d,c,i]);function Ne(){v(""),M("all"),N("all"),S("all"),x("relevance")}const Se="/local_hub_app/logo/localhub_logo.png",we="/local_hub_app/images/verified-badge.svg";function Ce(){const t=String(X||"").trim(),n=String(b||"").trim();if(!t||!n){$(!0);return}const o={province:D(t),provinceSlug:t,suburb:n,placeType:I==="village"?"village":"suburb",updatedAt:new Date().toISOString()};try{sessionStorage.setItem(fe,JSON.stringify(o))}catch{}$(!1),Z(!1)}return r.jsxs("div",{className:"page-shell",style:{"--bg-image":"url(/local_hub_app/images/background.png)"},children:[H?r.jsx("div",{className:"location-modal active",children:r.jsxs("div",{className:"location-card",role:"dialog","aria-modal":"true","aria-labelledby":"locationTitle",children:[r.jsx("h3",{id:"locationTitle",children:"Set your location"}),r.jsx("p",{children:"Please enter your province and suburb/village to continue."}),r.jsx(R,{id:"modalProvinceDropdown",label:"Province:",value:X,allOption:{value:"",label:"Select Province"},items:ee,onChange:t=>{Q(t),$(!1)}}),r.jsxs("div",{className:"location-field",children:[r.jsx("label",{children:"Choose one"}),r.jsxs("div",{className:"location-type-toggle",role:"group","aria-label":"Select location type",children:[r.jsx("button",{type:"button",className:`location-type-btn ${I==="suburb"?"active":""}`,onClick:()=>K("suburb"),children:"Suburb"}),r.jsx("button",{type:"button",className:`location-type-btn ${I==="village"?"active":""}`,onClick:()=>K("village"),children:"Village"})]})]}),r.jsxs("div",{className:"location-field",children:[r.jsx("label",{htmlFor:"modalSuburbInput",children:I==="village"?"Village":"Suburb"}),r.jsx("input",{id:"modalSuburbInput",type:"text",value:b,onChange:t=>{z(t.target.value),$(!1)},placeholder:I==="village"?"e.g. KwaMhlanga":"e.g. Orlando West"})]}),ve?r.jsx("div",{className:"location-error",children:"Please enter both province and suburb/village."}):null,r.jsx("div",{className:"location-actions",children:r.jsx("button",{type:"button",className:"location-save",onClick:Ce,children:"Save"})})]})}):null,r.jsxs("div",{className:"page",children:[r.jsx("div",{className:"hero",children:r.jsx("img",{src:Se,alt:"LocalHub",className:"hero-logo"})}),r.jsxs("div",{className:"search-card",children:[r.jsxs("div",{className:"search-wrapper",ref:U,children:[r.jsx("input",{type:"text",value:c,onChange:t=>{v(t.target.value),_(!0)},onFocus:()=>_(!0),placeholder:"Search a business, product, or neighborhood...",disabled:l}),r.jsx("button",{type:"button",className:`search-clear-btn ${c?"visible":""}`,"aria-label":"Clear search",onClick:()=>{v(""),_(!1)},children:"x"}),r.jsx("div",{className:`search-suggestions ${re?"visible":""}`,children:re?te.length?te.map(t=>{const n=(t==null?void 0:t.name)||"Business",o=typeof(t==null?void 0:t.logo)=="string"&&t.logo.trim().length?t.logo.trim():`https://ui-avatars.com/api/?name=${encodeURIComponent(n)}&background=random&color=fff`,g=[t==null?void 0:t.suburb,t==null?void 0:t.city,t==null?void 0:t.province].filter(Boolean),j=g.length?g.join(" â€¢ "):"Local business",C=(t==null?void 0:t.businessType)||(t==null?void 0:t.category)||"Services",k=!!(t!=null&&t.isVerified||t!=null&&t.verified||t!=null&&t.is_verified);return r.jsx("button",{type:"button",className:"search-suggestion",onClick:()=>{v(n),_(!1)},children:r.jsxs("span",{className:"suggestion-row",children:[r.jsx("img",{src:o,alt:`${n} logo`,className:"suggestion-avatar",onError:F=>{F.currentTarget.onerror=null,F.currentTarget.src=J({title:"Logo",subtitle:n})}}),r.jsxs("span",{className:"suggestion-text",children:[r.jsxs("span",{className:"suggestion-title",children:[n,k?r.jsx("img",{src:we,alt:"Verified",className:"suggestion-verified",title:"Verified business","aria-label":"Verified business"}):null]}),r.jsx("span",{className:"suggestion-badge",children:C}),r.jsx("span",{className:"suggestion-meta",children:j})]})]})},`${t.id}-suggestion`)}):r.jsx("div",{className:"search-suggestion empty",children:"No matches found"}):null})]}),r.jsx("button",{type:"button",onClick:()=>_(!1),children:"Search"})]}),r.jsxs("div",{className:"filter-toggle-row",children:[r.jsx("button",{type:"button",className:"filter-toggle-btn",onClick:()=>p(t=>!t),disabled:l,children:w?"Hide Filters":"Show Filters"}),r.jsx("button",{type:"button",className:"clear-filters-btn",onClick:Ne,disabled:l,style:{display:je?"inline-flex":"none"},children:"Clear Filters"})]}),r.jsxs("div",{className:`filter-bar ${w?"":"hidden"}`,children:[r.jsx(R,{id:"categoryDropdown",label:"Category:",value:y,allOption:ie[0],items:ie.slice(1),onChange:M}),r.jsx(R,{id:"provinceDropdown",label:"Province:",value:d,allOption:{value:"all",label:"All Provinces"},items:ee,onChange:t=>{N(t),S("all")}}),r.jsx(R,{id:"locationDropdown",label:"Location:",value:h,allOption:{value:"all",label:B?"Select Province First":"All Locations"},items:W.map(t=>({value:T(t),label:t})),onChange:S,disabled:B}),r.jsx(R,{id:"sortDropdown",label:"Sort by:",value:i,allOption:ue[0],items:ue.slice(1),onChange:x})]}),ae.length?r.jsx("div",{className:"active-filters",children:ae.map(t=>r.jsxs("span",{className:"filter-chip",children:[t.label,r.jsx("button",{type:"button",onClick:t.onClear,"aria-label":`Clear ${t.label}`,children:"x"})]},t.label))}):null,u?r.jsxs("div",{className:"error-state",children:[r.jsx("h3",{children:"Failed to load businesses"}),r.jsx("p",{children:u})]}):null,r.jsxs("div",{className:"business-grid",children:[l?r.jsx("div",{className:"skeleton-grid",style:{gridColumn:"1 / -1"},children:Array.from({length:6},(t,n)=>r.jsxs("div",{className:"skeleton-card",children:[r.jsx("div",{className:"skeleton-line small"}),r.jsx("div",{className:"skeleton-line tiny"}),r.jsx("div",{className:"skeleton-box"}),r.jsx("div",{className:"skeleton-line"}),r.jsx("div",{className:"skeleton-line small"})]},n))}):null,!l&&!u?ye.map(t=>r.jsx(Ee,{business:t},t.id)):null,!l&&!u&&V.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("h3",{children:"No results found"}),r.jsx("p",{children:"Try adjusting your filters or search term."})]}):null]}),!l&&!u&&xe?r.jsx("div",{className:"load-more-row",children:r.jsx("button",{type:"button",className:"load-more-btn",onClick:()=>A(t=>t+G),children:"Load more"})}):null]})]})}ke.createRoot(document.getElementById("root")).render(r.jsx(Le.StrictMode,{children:r.jsx(Be,{})}));
